import{o as e,j as t}from"./index-DbTe7u9S.js";import{b as r}from"./vendor-Dm_D0gIE.js";import"./axios-VSpmzgsF.js";function i({destination:i}){const[n,s]=r.useState([]),[d,a]=r.useState(new Set);r.useEffect(()=>{o();const e=setInterval(o,5e3);return()=>clearInterval(e)},[i]);const o=async()=>{try{const t=(await e.getAll()).filter(e=>"en_attente"===e.status),r=await Promise.all(t.map(async e=>{const t=(e.items||[]).filter(e=>"BAR"===i?"boissons"===e.categoryType:"repas"===e.categoryType);return t.length>0?{id:e.id,ticketNumber:e.ticketNumber,clientName:e.clientName,items:t,createdAt:e.createdAt,serveurName:e.createdByName||"Serveur"}:null}));s(r.filter(e=>null!==e))}catch(t){console.error("Erreur chargement commandes:",t)}},l="BAR"===i?"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)":"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",m="BAR"===i?"ðŸ¹":"ðŸ³";return t.jsxs("div",{style:{padding:"1rem",minHeight:"100vh",background:"#f5f5f5"},children:[t.jsxs("div",{style:{background:l,color:"white",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",textAlign:"center"},children:[t.jsxs("h1",{style:{margin:0,fontSize:"2.5rem"},children:[m," ",i]}),t.jsxs("p",{style:{margin:"0.5rem 0 0 0",opacity:.9},children:[n.length," commande",n.length>1?"s":""," en attente"]})]}),0===n.length?t.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"3rem",textAlign:"center",color:"#999"},children:[t.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"âœ…"}),t.jsx("h2",{children:"Aucune commande en attente"}),t.jsx("p",{children:"Les nouvelles commandes apparaÃ®tront ici automatiquement"})]}):t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:n.map(e=>t.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1.5rem",boxShadow:d.has(e.id)?"0 0 20px rgba(76, 175, 80, 0.5)":"0 4px 12px rgba(0,0,0,0.1)",border:d.has(e.id)?"3px solid #4caf50":"2px solid #ddd",transition:"all 0.3s ease"},children:[t.jsxs("div",{style:{borderBottom:"2px solid #f0f0f0",paddingBottom:"1rem",marginBottom:"1rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[t.jsxs("h3",{style:{margin:0,fontSize:"1.5rem"},children:["#",e.ticketNumber]}),t.jsx("span",{style:{background:"BAR"===i?"#f5576c":"#00f2fe",color:"white",padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.9rem",fontWeight:"bold"},children:new Date(e.createdAt).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]}),t.jsxs("div",{style:{color:"#666",fontSize:"0.95rem"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Client:"})," ",e.clientName]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Serveur:"})," ",e.serveurName]})]})]}),t.jsx("div",{style:{marginBottom:"1.5rem"},children:e.items.map((e,r)=>t.jsxs("div",{style:{padding:"0.75rem",background:"#f9f9f9",borderRadius:"8px",marginBottom:"0.5rem",border:"1px solid #e0e0e0"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("span",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:[e.quantity,"x"]}),t.jsx("span",{style:{flex:1,marginLeft:"1rem",fontSize:"1.1rem"},children:e.productName})]}),e.notes&&t.jsxs("div",{style:{marginTop:"0.5rem",padding:"0.5rem",background:"#fff3cd",borderRadius:"4px",fontSize:"0.9rem",color:"#856404"},children:["ðŸ“ ",e.notes]})]},r))}),t.jsx("button",{onClick:()=>{return t=e.id,a(e=>new Set(e).add(t)),void setTimeout(()=>{a(e=>{const r=new Set(e);return r.delete(t),r}),o()},2e3);var t},disabled:d.has(e.id),style:{width:"100%",padding:"1rem",background:d.has(e.id)?"#4caf50":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",fontSize:"1.1rem",fontWeight:"bold",cursor:d.has(e.id)?"default":"pointer",transition:"all 0.3s ease"},children:d.has(e.id)?"âœ… PRÃŠT":"âœ“ Marquer comme prÃªt"})]},e.id))})]})}export{i as default};
