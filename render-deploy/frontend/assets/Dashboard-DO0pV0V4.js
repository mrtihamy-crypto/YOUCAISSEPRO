import{c as e,p as t,j as r,a as i,U as n,u as o,o as s,b as d,d as a,e as l}from"./index-DbTe7u9S.js";import{b as c,u as p}from"./vendor-Dm_D0gIE.js";import"./axios-VSpmzgsF.js";const m=()=>{const[i,n]=c.useState([]),[o,s]=c.useState([]),[d,a]=c.useState("categories"),[l,p]=c.useState(!1),[m,x]=c.useState(!1),[h,g]=c.useState({name:"",description:""}),[u,y]=c.useState({categoryId:0,name:"",description:"",price:0,stock:0,image:""});c.useEffect(()=>{f(),b()},[]);const f=async()=>{try{const t=await e.getAll();n(t)}catch(t){console.error("Erreur chargement cat√©gories:",t)}},b=async()=>{try{const e=await t.getAll();s(e)}catch(e){console.error("Erreur chargement produits:",e)}};return r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.8rem",color:"#333",marginBottom:"1.5rem"},children:"Cat√©gories & Produits"}),r.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",borderBottom:"2px solid #eee"},children:[r.jsxs("button",{onClick:()=>a("categories"),style:{padding:"1rem 2rem",background:"transparent",border:"none",borderBottom:"categories"===d?"3px solid #667eea":"3px solid transparent",color:"categories"===d?"#667eea":"#666",fontWeight:"600",cursor:"pointer"},children:["Cat√©gories (",i.length,")"]}),r.jsxs("button",{onClick:()=>a("products"),style:{padding:"1rem 2rem",background:"transparent",border:"none",borderBottom:"products"===d?"3px solid #667eea":"3px solid transparent",color:"products"===d?"#667eea":"#666",fontWeight:"600",cursor:"pointer"},children:["Produits (",o.length,")"]})]}),"categories"===d?r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1.5rem"},children:[r.jsx("h3",{children:"Gestion des cat√©gories"}),r.jsx("button",{onClick:()=>p(!l),style:{padding:"0.75rem 1.5rem",background:"#667eea",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:l?"Annuler":"+ Nouvelle cat√©gorie"})]}),l&&r.jsx("div",{style:{background:"white",padding:"1.5rem",borderRadius:"10px",marginBottom:"2rem",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:r.jsxs("form",{onSubmit:async t=>{t.preventDefault();try{await e.create(h),g({name:"",description:""}),p(!1),f()}catch(r){alert(r.response?.data?.error||"Erreur cr√©ation cat√©gorie")}},children:[r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Nom de la cat√©gorie"}),r.jsx("input",{type:"text",value:h.name,onChange:e=>g({...h,name:e.target.value}),required:!0,placeholder:"Ex: Boissons, Plats...",style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"5px"}})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Description (optionnel)"}),r.jsx("textarea",{value:h.description,onChange:e=>g({...h,description:e.target.value}),rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"5px"}})]}),r.jsx("button",{type:"submit",style:{padding:"0.75rem 2rem",background:"#28a745",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"Cr√©er la cat√©gorie"})]})}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1.5rem"},children:i.map(t=>r.jsxs("div",{style:{background:"white",padding:"1.5rem",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[r.jsx("h4",{style:{marginBottom:"0.5rem",fontSize:"1.1rem"},children:t.name}),t.description&&r.jsx("p",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:t.description}),r.jsxs("p",{style:{fontSize:"0.85rem",color:"#999",marginBottom:"1rem"},children:[t.productCount||0," produit(s)"]}),r.jsx("button",{onClick:()=>(async t=>{if(confirm("Supprimer cette cat√©gorie et tous ses produits?"))try{await e.delete(t),f(),b()}catch(r){alert("Erreur suppression cat√©gorie")}})(t.id),style:{width:"100%",padding:"0.5rem",background:"#dc3545",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Supprimer"})]},t.id))})]}):r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1.5rem"},children:[r.jsx("h3",{children:"Gestion des produits"}),r.jsx("button",{onClick:()=>x(!m),style:{padding:"0.75rem 1.5rem",background:"#667eea",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:m?"Annuler":"+ Nouveau produit"})]}),m&&r.jsx("div",{style:{background:"white",padding:"1.5rem",borderRadius:"10px",marginBottom:"2rem",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:r.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{await t.create(u),y({categoryId:0,name:"",description:"",price:0,stock:0,image:""}),x(!1),b()}catch(r){alert(r.response?.data?.error||"Erreur cr√©ation produit")}},style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Cat√©gorie"}),r.jsxs("select",{value:u.categoryId,onChange:e=>y({...u,categoryId:parseInt(e.target.value)}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"5px"},children:[r.jsx("option",{value:0,children:"S√©lectionner..."}),i.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Nom du produit"}),r.jsx("input",{type:"text",value:u.name,onChange:e=>y({...u,name:e.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"5px"}})]}),r.jsxs("div",{style:{gridColumn:"1 / -1"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Description"}),r.jsx("textarea",{value:u.description,onChange:e=>y({...u,description:e.target.value}),rows:2,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"5px"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Prix (MAD)"}),r.jsx("input",{type:"number",step:"0.01",value:u.price,onChange:e=>y({...u,price:parseFloat(e.target.value)}),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"5px"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Stock (optionnel)"}),r.jsx("input",{type:"number",value:u.stock,onChange:e=>y({...u,stock:parseInt(e.target.value)||0}),style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"5px"}})]}),r.jsxs("div",{style:{gridColumn:"1 / -1"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"URL de l'image (optionnel)"}),r.jsx("input",{type:"text",value:u.image,onChange:e=>y({...u,image:e.target.value}),placeholder:"https://...",style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"5px"}})]}),r.jsx("div",{style:{gridColumn:"1 / -1"},children:r.jsx("button",{type:"submit",style:{padding:"0.75rem 2rem",background:"#28a745",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"Cr√©er le produit"})})]})}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"1.5rem"},children:o.map(e=>r.jsxs("div",{style:{background:"white",borderRadius:"10px",overflow:"hidden",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[e.image&&r.jsx("img",{src:e.image,alt:e.name,style:{width:"100%",height:"150px",objectFit:"cover"}}),!e.image&&r.jsx("div",{style:{width:"100%",height:"150px",background:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center",color:"#999"},children:"üì∑ Pas d'image"}),r.jsxs("div",{style:{padding:"1rem"},children:[r.jsx("p",{style:{fontSize:"0.75rem",color:"#667eea",marginBottom:"0.25rem"},children:e.categoryName}),r.jsx("h4",{style:{marginBottom:"0.5rem"},children:e.name}),e.description&&r.jsx("p",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"0.5rem"},children:e.description}),r.jsxs("p",{style:{fontSize:"1.2rem",fontWeight:"700",color:"#28a745",marginBottom:"0.5rem"},children:[e.price.toFixed(2)," MAD"]}),r.jsxs("p",{style:{fontSize:"0.85rem",color:"#999",marginBottom:"1rem"},children:["Stock: ",e.stock]}),r.jsx("button",{onClick:()=>(async e=>{if(confirm("Supprimer ce produit?"))try{await t.delete(e),b()}catch(r){alert("Erreur suppression produit")}})(e.id),style:{width:"100%",padding:"0.5rem",background:"#dc3545",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Supprimer"})]})]},e.id))})]})]})};function x(){const[e,t]=c.useState([]),[n,o]=c.useState(!1),[s,d]=c.useState(null),[a,l]=c.useState({destination:"BAR",type:"USB",name:"",usbPort:"",networkIp:"",networkPort:9100,isActive:!0}),[p,m]=c.useState(null),[x,g]=c.useState(null);c.useEffect(()=>{u()},[]);const u=async()=>{try{const e=await i.getAll();t(e),m(null)}catch(e){m("Erreur de connexion au serveur. V√©rifiez le r√©seau ou contactez le support."),console.error("Erreur chargement imprimantes:",e)}},y=e=>{d(e),l(e),o(!0)},f=async e=>{if(window.confirm("Supprimer cette imprimante ?"))try{await i.delete(e),await u()}catch(t){alert("Erreur lors de la suppression")}},b=()=>{l({destination:"BAR",type:"USB",name:"",usbPort:"",networkIp:"",networkPort:9100,isActive:!0})},j=async e=>{g(e.id);try{const t=await i.test(e.id);alert(`‚úÖ ${t.message}\n\nV√©rifiez que l'imprimante a bien imprim√© le ticket de test.`),g(null)}catch(t){const e=t.response?.data?.error||"Erreur lors du test d'impression",r=t.response?.data?.details||"";alert(`‚ùå ${e}\n\n${r}\n\nV√©rifiez :\n- L'imprimante est allum√©e\n- Le c√¢ble USB/R√©seau est branch√©\n- Les drivers sont install√©s`),g(null)}},v={BAR:e.filter(e=>"BAR"===e.destination),CUISINE:e.filter(e=>"CUISINE"===e.destination)};return r.jsxs("div",{children:[p&&r.jsx("div",{style:{background:"#ff4d4f",color:"white",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",textAlign:"center",fontWeight:"bold",boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:p}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[r.jsx("h2",{style:{margin:0},children:"üñ®Ô∏è Configuration des Imprimantes"}),r.jsx("button",{onClick:()=>{o(!0),d(null),b()},style:{padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:"‚ûï Ajouter une imprimante"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem"},children:[r.jsxs("div",{children:[r.jsx("h3",{style:{padding:"1rem",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",borderRadius:"8px 8px 0 0",margin:0},children:"üçπ IMPRIMANTES BAR"}),r.jsx("div",{style:{border:"2px solid #f5576c",borderRadius:"0 0 8px 8px",padding:"1rem"},children:0===v.BAR.length?r.jsx("p",{style:{textAlign:"center",color:"#999",padding:"2rem"},children:"Aucune imprimante configur√©e"}):v.BAR.map(e=>r.jsx(h,{printer:e,onEdit:y,onDelete:f,onTest:j,isTesting:x===e.id},e.id))})]}),r.jsxs("div",{children:[r.jsx("h3",{style:{padding:"1rem",background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",color:"white",borderRadius:"8px 8px 0 0",margin:0},children:"üç≥ IMPRIMANTES CUISINE"}),r.jsx("div",{style:{border:"2px solid #00f2fe",borderRadius:"0 0 8px 8px",padding:"1rem"},children:0===v.CUISINE.length?r.jsx("p",{style:{textAlign:"center",color:"#999",padding:"2rem"},children:"Aucune imprimante configur√©e"}):v.CUISINE.map(e=>r.jsx(h,{printer:e,onEdit:y,onDelete:f,onTest:j,isTesting:x===e.id},e.id))})]})]}),n&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto"},children:[r.jsx("h2",{style:{marginTop:0},children:s?"‚úèÔ∏è Modifier l'imprimante":"‚ûï Nouvelle imprimante"}),r.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),a.name.trim())if("USB"!==a.type||a.usbPort?.trim())if("NETWORK"!==a.type||a.networkIp?.trim()&&a.networkPort)try{s?await i.update(s.id,a):await i.create(a),o(!1),d(null),b(),await u()}catch(t){alert(t.response?.data?.error||"Erreur lors de la sauvegarde")}else alert("IP et port r√©seau requis");else alert("Port USB requis");else alert("Nom de l'imprimante requis")},children:[r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Destination"}),r.jsxs("select",{value:a.destination,onChange:e=>l({...a,destination:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"2px solid #ddd",borderRadius:"8px",fontSize:"1rem"},children:[r.jsx("option",{value:"BAR",children:"üçπ BAR (Boissons)"}),r.jsx("option",{value:"CUISINE",children:"üç≥ CUISINE (Repas)"})]})]}),r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Type de connexion"}),r.jsxs("select",{value:a.type,onChange:e=>l({...a,type:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"2px solid #ddd",borderRadius:"8px",fontSize:"1rem"},children:[r.jsx("option",{value:"USB",children:"üîå USB"}),r.jsx("option",{value:"NETWORK",children:"üåê R√©seau (IP)"})]})]}),r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Nom de l'imprimante *"}),r.jsx("input",{type:"text",value:a.name,onChange:e=>l({...a,name:e.target.value}),placeholder:"Ex: Epson TM-T20",style:{width:"100%",padding:"0.75rem",border:"2px solid #ddd",borderRadius:"8px",fontSize:"1rem"}})]}),"USB"===a.type&&r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Port USB *"}),r.jsx("input",{type:"text",value:a.usbPort,onChange:e=>l({...a,usbPort:e.target.value}),placeholder:"Ex: COM1, COM2 ou /dev/usb/lp0",style:{width:"100%",padding:"0.75rem",border:"2px solid #ddd",borderRadius:"8px",fontSize:"1rem"}})]}),"NETWORK"===a.type&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Adresse IP *"}),r.jsx("input",{type:"text",value:a.networkIp,onChange:e=>l({...a,networkIp:e.target.value}),placeholder:"Ex: 192.168.1.100",style:{width:"100%",padding:"0.75rem",border:"2px solid #ddd",borderRadius:"8px",fontSize:"1rem"}})]}),r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Port *"}),r.jsx("input",{type:"number",value:a.networkPort,onChange:e=>l({...a,networkPort:parseInt(e.target.value)}),placeholder:"9100",style:{width:"100%",padding:"0.75rem",border:"2px solid #ddd",borderRadius:"8px",fontSize:"1rem"}})]})]}),r.jsx("div",{style:{marginBottom:"1.5rem"},children:r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[r.jsx("input",{type:"checkbox",checked:a.isActive,onChange:e=>l({...a,isActive:e.target.checked}),style:{width:"20px",height:"20px"}}),r.jsx("span",{style:{fontWeight:"600"},children:"Imprimante active"})]})}),r.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[r.jsx("button",{type:"submit",style:{flex:1,padding:"1rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:s?"üíæ Enregistrer":"‚ûï Ajouter"}),r.jsx("button",{type:"button",onClick:()=>{o(!1),d(null),b()},style:{flex:1,padding:"1rem",background:"#f44336",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"‚ùå Annuler"})]})]})]})})]})}function h({printer:e,onEdit:t,onDelete:i,onTest:n,isTesting:o}){return r.jsx("div",{style:{padding:"1rem",background:e.isActive?"#f0f9ff":"#f5f5f5",border:e.isActive?"2px solid #667eea":"2px solid #ccc",borderRadius:"8px",marginBottom:"1rem"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"0.5rem"},children:[r.jsxs("div",{children:[r.jsxs("h4",{style:{margin:0,marginBottom:"0.5rem"},children:[e.name,e.isActive&&r.jsx("span",{style:{marginLeft:"0.5rem",color:"#28a745"},children:"‚úì Active"})]}),r.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Type:"})," ","USB"===e.type?"üîå USB":"üåê R√©seau"]}),"USB"===e.type&&r.jsxs("div",{children:[r.jsx("strong",{children:"Port:"})," ",e.usbPort]}),"NETWORK"===e.type&&r.jsxs("div",{children:[r.jsx("strong",{children:"Adresse:"})," ",e.networkIp,":",e.networkPort]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>n(e),disabled:o,style:{padding:"0.5rem 1rem",background:o?"#ccc":"#4caf50",color:"white",border:"none",borderRadius:"6px",cursor:o?"not-allowed":"pointer",fontSize:"0.9rem"},children:o?"‚è≥":"üñ®Ô∏è"}),r.jsx("button",{onClick:()=>t(e),style:{padding:"0.5rem 1rem",background:"#667eea",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem"},children:"‚úèÔ∏è"}),r.jsx("button",{onClick:()=>i(e.id),style:{padding:"0.5rem 1rem",background:"#f44336",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem"},children:"üóëÔ∏è"})]})]})})}const g=()=>{const[e,t]=c.useState("dashboard"),[i,s]=c.useState([]),[d,a]=c.useState(null),[l,p]=c.useState(!1),[h,g]=c.useState(null),[u,y]=c.useState(""),[f,b]=c.useState({username:"",password:"",role:n.SERVEUR,nom:"",prenom:""});c.useEffect(()=>{j(),v();const e=setInterval(v,5e3);return()=>clearInterval(e)},[]);const j=async()=>{try{const e=await o.getAll();s(e)}catch(e){console.error("Erreur chargement utilisateurs:",e)}},v=async()=>{try{const e=await o.getStats();a(e)}catch(e){console.error("Erreur chargement stats:",e)}},w=e=>`${e.toFixed(2)} MAD`;return r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",borderBottom:"2px solid #eee"},children:[r.jsx("button",{onClick:()=>t("dashboard"),style:{padding:"1rem 2rem",background:"transparent",border:"none",borderBottom:"dashboard"===e?"3px solid #667eea":"3px solid transparent",color:"dashboard"===e?"#667eea":"#666",fontWeight:"600",cursor:"pointer"},children:"üìä Tableau de bord"}),r.jsx("button",{onClick:()=>t("users"),style:{padding:"1rem 2rem",background:"transparent",border:"none",borderBottom:"users"===e?"3px solid #667eea":"3px solid transparent",color:"users"===e?"#667eea":"#666",fontWeight:"600",cursor:"pointer"},children:"üë§ Utilisateurs"}),r.jsx("button",{onClick:()=>t("products"),style:{padding:"1rem 2rem",background:"transparent",border:"none",borderBottom:"products"===e?"3px solid #667eea":"3px solid transparent",color:"products"===e?"#667eea":"#666",fontWeight:"600",cursor:"pointer"},children:"üçΩÔ∏è Cat√©gories & Produits"}),r.jsx("button",{onClick:()=>t("printers"),style:{padding:"1rem 2rem",background:"transparent",border:"none",borderBottom:"printers"===e?"3px solid #667eea":"3px solid transparent",color:"printers"===e?"#667eea":"#666",fontWeight:"600",cursor:"pointer"},children:"üñ®Ô∏è Imprimantes"})]}),"dashboard"===e&&d&&r.jsxs("div",{children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1.5rem",marginBottom:"2rem"},children:[r.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"1.5rem",borderRadius:"15px",color:"white",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.3)"},children:[r.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:"üí∞ Chiffre d'affaire du jour"}),r.jsx("div",{style:{fontSize:"2rem",fontWeight:"700"},children:w(d.totalSales?.totalRevenue||0)})]}),r.jsxs("div",{style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",padding:"1.5rem",borderRadius:"15px",color:"white",boxShadow:"0 4px 15px rgba(245, 87, 108, 0.3)"},children:[r.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:"üìù Commandes pay√©es"}),r.jsx("div",{style:{fontSize:"2rem",fontWeight:"700"},children:d.totalSales?.totalOrders||0})]}),r.jsxs("div",{style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",padding:"1.5rem",borderRadius:"15px",color:"white",boxShadow:"0 4px 15px rgba(79, 172, 254, 0.3)"},children:[r.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:"üîì Tables ouvertes"}),r.jsx("div",{style:{fontSize:"2rem",fontWeight:"700"},children:d.totalSales?.openOrders||0})]})]}),r.jsxs("div",{style:{background:"white",borderRadius:"15px",padding:"1.5rem",marginBottom:"2rem",boxShadow:"0 2px 15px rgba(0,0,0,0.08)"},children:[r.jsx("h3",{style:{margin:"0 0 1.5rem 0",fontSize:"1.3rem",color:"#333"},children:"üìä Performance des serveurs (aujourd'hui)"}),r.jsx("div",{style:{display:"grid",gap:"1rem"},children:d.salesByServer?.map(e=>r.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"1rem",background:"#f8f9fa",borderRadius:"10px",border:"3px solid "+(e.isActive?"#28a745":"#dc3545")},children:[r.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:e.isActive?"#28a745":"#dc3545",marginRight:"1rem"}}),r.jsxs("div",{style:{flex:1},children:[r.jsxs("div",{style:{fontWeight:"600",fontSize:"1.1rem"},children:[e.prenom," ",e.nom]}),r.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:"0.25rem"},children:e.isActive?"‚úÖ Connect√©":"üî¥ D√©connect√©"})]}),r.jsxs("div",{style:{textAlign:"right"},children:[r.jsx("div",{style:{fontSize:"1.3rem",fontWeight:"700",color:"#667eea"},children:w(e.revenue||0)}),r.jsxs("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:"0.25rem"},children:[e.orderCount||0," commande(s)"]})]})]},e.id))})]}),r.jsxs("div",{style:{background:"white",borderRadius:"15px",padding:"1.5rem",marginBottom:"2rem",boxShadow:"0 2px 15px rgba(0,0,0,0.08)"},children:[r.jsxs("h3",{style:{margin:"0 0 1.5rem 0",fontSize:"1.3rem",color:"#333"},children:["üîì Tables ouvertes (",d.openTables?.length||0,")"]}),d.openTables&&d.openTables.length>0?r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem"},children:d.openTables.map(e=>r.jsxs("div",{style:{padding:"1rem",background:"#fff3cd",border:"2px solid #ffc107",borderRadius:"10px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsxs("span",{style:{fontWeight:"600"},children:["#",e.id]}),r.jsxs("span",{style:{fontSize:"0.85rem",color:"#666"},children:[e.itemCount," article(s)"]})]}),r.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"0.5rem"},children:e.location}),e.ticketNumber&&r.jsxs("div",{style:{fontSize:"0.75rem",color:"#667eea",marginBottom:"0.5rem"},children:["üé´ ",e.ticketNumber]}),r.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"700",color:"#28a745"},children:w(e.total)}),r.jsx("div",{style:{fontSize:"0.75rem",color:"#666",marginTop:"0.5rem"},children:new Date(e.createdAt).toLocaleString("fr-FR")})]},e.id))}):r.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"#999"},children:"Aucune table ouverte"})]}),r.jsxs("div",{style:{background:"white",borderRadius:"15px",padding:"1.5rem",boxShadow:"0 2px 15px rgba(0,0,0,0.08)"},children:[r.jsx("h3",{style:{margin:"0 0 1.5rem 0",fontSize:"1.3rem",color:"#333"},children:"üìà Historique des ventes (7 derniers jours)"}),r.jsx("div",{style:{overflowX:"auto"},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{background:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[r.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"Date"}),r.jsx("th",{style:{padding:"1rem",textAlign:"right",fontWeight:"600"},children:"Commandes"}),r.jsx("th",{style:{padding:"1rem",textAlign:"right",fontWeight:"600"},children:"Chiffre d'affaire"})]})}),r.jsx("tbody",{children:d.dailyHistory?.map((e,t)=>r.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6",background:0===t?"#f0f4ff":"white"},children:[r.jsxs("td",{style:{padding:"1rem",fontWeight:0===t?"600":"400"},children:[new Date(e.date).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),0===t&&r.jsx("span",{style:{marginLeft:"0.5rem",color:"#667eea",fontSize:"0.85rem"},children:"‚Ä¢ Aujourd'hui"})]}),r.jsx("td",{style:{padding:"1rem",textAlign:"right"},children:e.orderCount}),r.jsx("td",{style:{padding:"1rem",textAlign:"right",fontWeight:"600",color:"#28a745"},children:w(e.revenue)})]},e.date))})]})})]})]}),"products"===e&&r.jsx(m,{}),"printers"===e&&r.jsx(x,{}),"users"===e&&r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[r.jsx("h2",{style:{fontSize:"1.8rem",color:"#333"},children:"Gestion des utilisateurs"}),r.jsx("button",{onClick:()=>p(!l),style:{padding:"0.75rem 1.5rem",background:"#667eea",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:l?"Annuler":"+ Nouvel utilisateur"})]}),l&&r.jsxs("div",{style:{background:"white",padding:"1.5rem",borderRadius:"10px",marginBottom:"2rem",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[r.jsx("h3",{style:{marginBottom:"1rem"},children:"Cr√©er un utilisateur"}),r.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{await o.create(f),p(!1),b({username:"",password:"",role:n.SERVEUR,nom:"",prenom:""}),j()}catch(t){alert(t.response?.data?.error||"Erreur lors de la cr√©ation")}},style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",fontWeight:"500"},children:"Username"}),r.jsx("input",{type:"text",value:f.username,onChange:e=>b({...f,username:e.target.value}),required:!0,style:{width:"100%",padding:"0.5rem",border:"1px solid #ddd",borderRadius:"5px"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",fontWeight:"500"},children:"Mot de passe"}),r.jsx("input",{type:"password",value:f.password,onChange:e=>b({...f,password:e.target.value}),required:!0,style:{width:"100%",padding:"0.5rem",border:"1px solid #ddd",borderRadius:"5px"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",fontWeight:"500"},children:"Nom"}),r.jsx("input",{type:"text",value:f.nom,onChange:e=>b({...f,nom:e.target.value}),required:!0,style:{width:"100%",padding:"0.5rem",border:"1px solid #ddd",borderRadius:"5px"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",fontWeight:"500"},children:"Pr√©nom"}),r.jsx("input",{type:"text",value:f.prenom,onChange:e=>b({...f,prenom:e.target.value}),required:!0,style:{width:"100%",padding:"0.5rem",border:"1px solid #ddd",borderRadius:"5px"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",fontWeight:"500"},children:"R√¥le"}),r.jsxs("select",{value:f.role,onChange:e=>b({...f,role:e.target.value}),style:{width:"100%",padding:"0.5rem",border:"1px solid #ddd",borderRadius:"5px"},children:[r.jsx("option",{value:n.ADMIN,children:"Administrateur"}),r.jsx("option",{value:n.CAISSIER,children:"Caissier"}),r.jsx("option",{value:n.SERVEUR,children:"Serveur"})]})]}),r.jsx("div",{style:{display:"flex",alignItems:"flex-end"},children:r.jsx("button",{type:"submit",style:{width:"100%",padding:"0.5rem",background:"#28a745",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"Cr√©er"})})]})]}),r.jsx("div",{style:{background:"white",borderRadius:"10px",overflow:"hidden",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{background:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[r.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"ID"}),r.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"Username"}),r.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"Nom complet"}),r.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"R√¥le"}),r.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"Statut"}),r.jsx("th",{style:{padding:"1rem",textAlign:"left",fontWeight:"600"},children:"Actions"})]})}),r.jsx("tbody",{children:i.map(e=>r.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[r.jsx("td",{style:{padding:"1rem"},children:e.id}),r.jsx("td",{style:{padding:"1rem"},children:e.username}),r.jsxs("td",{style:{padding:"1rem"},children:[e.prenom," ",e.nom]}),r.jsx("td",{style:{padding:"1rem"},children:r.jsx("span",{style:{padding:"0.25rem 0.75rem",background:"ADMIN"===e.role?"#667eea":"CAISSIER"===e.role?"#28a745":"#ffc107",color:"white",borderRadius:"20px",fontSize:"0.85rem"},children:e.role})}),r.jsxs("td",{style:{padding:"1rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:e.isActive?"#28a745":"#dc3545"}}),r.jsx("span",{style:{fontSize:"0.9rem",color:e.isActive?"#28a745":"#999"},children:e.isActive?"Connect√©":"D√©connect√©"})]}),e.lastLogin&&r.jsxs("div",{style:{fontSize:"0.75rem",color:"#999",marginTop:"0.25rem"},children:["Derni√®re connexion: ",new Date(e.lastLogin).toLocaleString("fr-FR")]})]}),r.jsx("td",{style:{padding:"1rem"},children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>g(e.id),style:{padding:"0.5rem 1rem",background:"#ffc107",color:"#333",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"0.85rem"},children:"üîë R√©initialiser"}),r.jsx("button",{onClick:()=>(async e=>{if(confirm("Confirmer la suppression?"))try{await o.delete(e),j()}catch(t){alert("Erreur lors de la suppression")}})(e.id),style:{padding:"0.5rem 1rem",background:"#dc3545",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"0.85rem"},children:"üóëÔ∏è Supprimer"})]})})]},e.id))})]})})]}),h&&r.jsx("div",{onClick:()=>{g(null),y("")},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{onClick:e=>e.stopPropagation(),style:{background:"white",padding:"2rem",borderRadius:"15px",maxWidth:"500px",width:"90%",boxShadow:"0 10px 40px rgba(0,0,0,0.2)"},children:[r.jsx("h3",{style:{marginTop:0,marginBottom:"1.5rem"},children:"üîë R√©initialiser le mot de passe"}),r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Nouveau mot de passe"}),r.jsx("input",{type:"password",value:u,onChange:e=>y(e.target.value),placeholder:"Minimum 4 caract√®res",style:{width:"100%",padding:"0.75rem",border:"2px solid #dee2e6",borderRadius:"5px",fontSize:"1rem"}})]}),r.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[r.jsx("button",{onClick:()=>{g(null),y("")},style:{flex:1,padding:"0.75rem",background:"#6c757d",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"Annuler"}),r.jsx("button",{onClick:()=>h&&(async e=>{if(!u||u.length<4)alert("Le mot de passe doit contenir au moins 4 caract√®res");else try{await o.resetPassword(e,u),alert("Mot de passe r√©initialis√© avec succ√®s"),g(null),y("")}catch(t){alert("Erreur lors de la r√©initialisation")}})(h),style:{flex:1,padding:"0.75rem",background:"#28a745",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"‚úì Confirmer"})]})]})})]})},u=()=>{const[i,n]=c.useState([]),[o,s]=c.useState([]),[d,a]=c.useState(!1),[l,p]=c.useState(!1),[m,x]=c.useState(null),[h,g]=c.useState(null),[u,y]=c.useState("all"),[f,b]=c.useState(null),[j,v]=c.useState({name:"",description:"",price:0,stock:0,categoryId:0,image:"",available:!0}),[w,k]=c.useState({name:"",description:"",type:"repas"});c.useEffect(()=>{S()},[]);const S=async()=>{try{const[r,i]=await Promise.all([t.getAll(),e.getAll()]);n(r),s(i)}catch(r){console.error("Erreur chargement donn√©es:",r)}},C=()=>{v({name:"",description:"",price:0,stock:0,categoryId:0,image:"",available:!0}),x(null)},A=()=>{k({name:"",description:"",type:"repas"}),g(null)},R=e=>{e?(x(e),v({name:e.name,description:e.description||"",price:e.price,stock:e.stock,categoryId:e.categoryId,image:e.image||"",available:e.available})):C(),a(!0)},B=e=>{e?(g(e),k({name:e.name,description:e.description||"",type:e.type||"repas"})):A(),p(!0)},z=i.filter(e=>{if(f&&e.categoryId!==f)return!1;if("all"!==u){const t=o.find(t=>t.id===e.categoryId);if(t?.type!==u)return!1}return!0}),T="all"===u?o:o.filter(e=>e.type===u);return r.jsxs("div",{children:[r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem",alignItems:"center"},children:[r.jsx("h2",{style:{margin:0,flex:1},children:"Gestion Produits & Cat√©gories"}),r.jsx("button",{onClick:()=>B(),style:{padding:"0.75rem 1.5rem",background:"#667eea",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"‚ûï Nouvelle Cat√©gorie"}),r.jsx("button",{onClick:()=>R(),style:{padding:"0.75rem 1.5rem",background:"#28a745",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"‚ûï Nouveau Produit"})]}),r.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[r.jsxs("select",{value:u,onChange:e=>y(e.target.value),style:{padding:"0.5rem 1rem",border:"2px solid #667eea",borderRadius:"5px",fontSize:"0.9rem",cursor:"pointer"},children:[r.jsx("option",{value:"all",children:"Tous les types"}),r.jsx("option",{value:"repas",children:"üçΩÔ∏è Repas"}),r.jsx("option",{value:"boissons",children:"ü•§ Boissons"})]}),r.jsxs("select",{value:f||"",onChange:e=>b(e.target.value?Number(e.target.value):null),style:{padding:"0.5rem 1rem",border:"2px solid #667eea",borderRadius:"5px",fontSize:"0.9rem",cursor:"pointer"},children:[r.jsx("option",{value:"",children:"Toutes les cat√©gories"}),T.map(e=>r.jsxs("option",{value:e.id,children:["boissons"===e.type?"ü•§":"üçΩÔ∏è"," ",e.name]},e.id))]})]})]}),r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsxs("h3",{style:{marginBottom:"1rem"},children:["Cat√©gories (",T.length,")"]}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem"},children:T.map(t=>r.jsx("div",{style:{background:"white",padding:"1rem",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",border:"2px solid #f0f0f0"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"0.5rem"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("span",{style:{fontSize:"1.5rem",marginRight:"0.5rem"},children:"boissons"===t.type?"ü•§":"üçΩÔ∏è"}),r.jsx("strong",{style:{fontSize:"1.1rem"},children:t.name}),r.jsx("p",{style:{margin:"0.25rem 0",color:"#666",fontSize:"0.85rem"},children:t.description}),r.jsx("span",{style:{display:"inline-block",marginTop:"0.5rem",padding:"0.25rem 0.75rem",background:"boissons"===t.type?"#e3f2fd":"#fff3e0",color:"boissons"===t.type?"#1976d2":"#e65100",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"600"},children:"boissons"===t.type?"Boissons":"Repas"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>B(t),style:{padding:"0.4rem 0.8rem",background:"#667eea",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.85rem"},children:"‚úèÔ∏è"}),r.jsx("button",{onClick:()=>(async t=>{if(confirm("Supprimer cette cat√©gorie ? Tous les produits associ√©s seront aussi supprim√©s."))try{await e.delete(t),await S()}catch(r){alert("Erreur lors de la suppression")}})(t.id),style:{padding:"0.4rem 0.8rem",background:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.85rem"},children:"üóëÔ∏è"})]})]})},t.id))})]}),r.jsxs("div",{children:[r.jsxs("h3",{style:{marginBottom:"1rem"},children:["Produits (",z.length,")"]}),r.jsx("div",{style:{background:"white",borderRadius:"10px",overflow:"hidden",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{background:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[r.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Produit"}),r.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Cat√©gorie"}),r.jsx("th",{style:{padding:"1rem",textAlign:"right"},children:"Prix"}),r.jsx("th",{style:{padding:"1rem",textAlign:"center"},children:"Stock"}),r.jsx("th",{style:{padding:"1rem",textAlign:"center"},children:"Disponible"}),r.jsx("th",{style:{padding:"1rem",textAlign:"center"},children:"Actions"})]})}),r.jsx("tbody",{children:0===z.length?r.jsx("tr",{children:r.jsx("td",{colSpan:6,style:{padding:"2rem",textAlign:"center",color:"#999"},children:"Aucun produit"})}):z.map(e=>{const i=o.find(t=>t.id===e.categoryId);return r.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[r.jsxs("td",{style:{padding:"1rem"},children:[r.jsx("strong",{children:e.name}),e.description&&r.jsx("p",{style:{margin:"0.25rem 0 0 0",color:"#666",fontSize:"0.85rem"},children:e.description})]}),r.jsx("td",{style:{padding:"1rem"},children:i&&r.jsxs("span",{children:["boissons"===i.type?"ü•§":"üçΩÔ∏è"," ",i.name]})}),r.jsxs("td",{style:{padding:"1rem",textAlign:"right",fontWeight:"600"},children:[e.price.toFixed(2)," MAD"]}),r.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:r.jsx("span",{style:{padding:"0.25rem 0.75rem",background:e.stock>10?"#d4edda":e.stock>0?"#fff3cd":"#f8d7da",color:e.stock>10?"#155724":e.stock>0?"#856404":"#721c24",borderRadius:"12px",fontSize:"0.85rem",fontWeight:"600"},children:e.stock})}),r.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:r.jsx("span",{style:{padding:"0.25rem 0.75rem",background:e.available?"#28a745":"#dc3545",color:"white",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"600"},children:e.available?"Oui":"Non"})}),r.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:r.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[r.jsx("button",{onClick:()=>R(e),style:{padding:"0.5rem 1rem",background:"#667eea",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.85rem"},children:"‚úèÔ∏è Modifier"}),r.jsx("button",{onClick:()=>(async e=>{if(confirm("Supprimer ce produit ?"))try{await t.delete(e),await S()}catch(r){alert("Erreur lors de la suppression")}})(e.id),style:{padding:"0.5rem 1rem",background:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.85rem"},children:"üóëÔ∏è"})]})})]},e.id)})})]})})]}),d&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"10px",width:"90%",maxWidth:"600px",boxShadow:"0 10px 40px rgba(0,0,0,0.3)"},children:[r.jsx("h3",{style:{marginTop:0},children:m?"Modifier le produit":"Nouveau produit"}),r.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Nom *"}),r.jsx("input",{type:"text",value:j.name,onChange:e=>v({...j,name:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"2px solid #dee2e6",borderRadius:"5px",fontSize:"1rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Description"}),r.jsx("textarea",{value:j.description,onChange:e=>v({...j,description:e.target.value}),rows:3,style:{width:"100%",padding:"0.75rem",border:"2px solid #dee2e6",borderRadius:"5px",fontSize:"1rem",fontFamily:"inherit"}})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Prix (MAD) *"}),r.jsx("input",{type:"number",step:"0.01",value:j.price,onChange:e=>v({...j,price:parseFloat(e.target.value)||0}),style:{width:"100%",padding:"0.75rem",border:"2px solid #dee2e6",borderRadius:"5px",fontSize:"1rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Stock"}),r.jsx("input",{type:"number",value:j.stock,onChange:e=>v({...j,stock:parseInt(e.target.value)||0}),style:{width:"100%",padding:"0.75rem",border:"2px solid #dee2e6",borderRadius:"5px",fontSize:"1rem"}})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Cat√©gorie *"}),r.jsxs("select",{value:j.categoryId,onChange:e=>v({...j,categoryId:parseInt(e.target.value)}),style:{width:"100%",padding:"0.75rem",border:"2px solid #dee2e6",borderRadius:"5px",fontSize:"1rem",cursor:"pointer"},children:[r.jsx("option",{value:0,children:"S√©lectionner une cat√©gorie"}),o.map(e=>r.jsxs("option",{value:e.id,children:["boissons"===e.type?"ü•§":"üçΩÔ∏è"," ",e.name]},e.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"URL Image"}),r.jsx("input",{type:"text",value:j.image,onChange:e=>v({...j,image:e.target.value}),placeholder:"https://...",style:{width:"100%",padding:"0.75rem",border:"2px solid #dee2e6",borderRadius:"5px",fontSize:"1rem"}})]}),r.jsx("div",{children:r.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[r.jsx("input",{type:"checkbox",checked:j.available,onChange:e=>v({...j,available:e.target.checked}),style:{marginRight:"0.5rem",transform:"scale(1.2)"}}),r.jsx("span",{style:{fontWeight:"600"},children:"Produit disponible"})]})})]}),r.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[r.jsx("button",{onClick:()=>{a(!1),C()},style:{flex:1,padding:"0.75rem",background:"#6c757d",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"Annuler"}),r.jsx("button",{onClick:async()=>{try{m?await t.update(m.id,j):await t.create(j),await S(),C(),a(!1)}catch(e){alert("Erreur lors de la sauvegarde du produit")}},disabled:!j.name||!j.categoryId||j.price<=0,style:{flex:1,padding:"0.75rem",background:j.name&&j.categoryId&&j.price>0?"#28a745":"#ccc",color:"white",border:"none",borderRadius:"5px",cursor:j.name&&j.categoryId&&j.price>0?"pointer":"not-allowed",fontWeight:"600"},children:m?"Mettre √† jour":"Cr√©er"})]})]})}),l&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"10px",width:"90%",maxWidth:"500px",boxShadow:"0 10px 40px rgba(0,0,0,0.3)"},children:[r.jsx("h3",{style:{marginTop:0},children:h?"Modifier la cat√©gorie":"Nouvelle cat√©gorie"}),r.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Nom *"}),r.jsx("input",{type:"text",value:w.name,onChange:e=>k({...w,name:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"2px solid #dee2e6",borderRadius:"5px",fontSize:"1rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Description"}),r.jsx("textarea",{value:w.description,onChange:e=>k({...w,description:e.target.value}),rows:3,style:{width:"100%",padding:"0.75rem",border:"2px solid #dee2e6",borderRadius:"5px",fontSize:"1rem",fontFamily:"inherit"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Type *"}),r.jsxs("select",{value:w.type,onChange:e=>k({...w,type:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"2px solid #dee2e6",borderRadius:"5px",fontSize:"1rem",cursor:"pointer"},children:[r.jsx("option",{value:"repas",children:"üçΩÔ∏è Repas"}),r.jsx("option",{value:"boissons",children:"ü•§ Boissons"})]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[r.jsx("button",{onClick:()=>{p(!1),A()},style:{flex:1,padding:"0.75rem",background:"#6c757d",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"Annuler"}),r.jsx("button",{onClick:async()=>{try{h?await e.update(h.id,w):await e.create(w),await S(),A(),p(!1)}catch(t){alert("Erreur lors de la sauvegarde de la cat√©gorie")}},disabled:!w.name,style:{flex:1,padding:"0.75rem",background:w.name?"#28a745":"#ccc",color:"white",border:"none",borderRadius:"5px",cursor:w.name?"pointer":"not-allowed",fontWeight:"600"},children:h?"Mettre √† jour":"Cr√©er"})]})]})})]})},y=()=>{const[e,i]=c.useState([]),[n,o]=c.useState(null),[a,l]=c.useState(null),[p,m]=c.useState(""),[h,g]=c.useState(!1),[y,f]=c.useState([]),[b,j]=c.useState(null),[v,w]=c.useState(0),[k,S]=c.useState("percentage"),[C,A]=c.useState(""),[R,B]=c.useState("chambre"),[z,T]=c.useState(!1),[W,I]=c.useState(0),[D,M]=c.useState("espece"),[E,N]=c.useState(!1),[$,F]=c.useState(!1),[P,L]=c.useState(null),[O,q]=c.useState("commandes"),[U,G]=c.useState(""),[Y,V]=c.useState(null),[H,Z]=c.useState(!1),[_,K]=c.useState([]),[Q,J]=c.useState(!1),[X,ee]=c.useState(0),[te,re]=c.useState("espece");c.useEffect(()=>{ie(),ne(),oe();const e=setInterval(()=>{ie(),ne()},5e3);return()=>clearInterval(e)},[]);const ie=async()=>{try{const e=await s.getAll();i(e)}catch(e){console.error("Erreur chargement commandes:",e)}},ne=async()=>{try{const e=await s.getDailySales();l(e)}catch(e){console.error("Erreur chargement CA:",e)}},oe=async()=>{try{const e=await t.getGrouped();f(e),e.length>0&&j(e[0].id)}catch(e){console.error("Erreur chargement produits:",e)}},se=async e=>{try{const t=await s.getById(e);o(t),g(!1),w(0),I(t.total)}catch(t){alert("Erreur lors du chargement de la commande")}},de=(e,t)=>{if(!n||t<1)return;const r=[...n.items];r[e].quantity=t,r[e].total=r[e].price*t,o({...n,items:r,total:r.reduce((e,t)=>e+t.total,0)})},ae=()=>{if(!n)return 0;let e=n.total;return v>0&&(e-="percentage"===k?e*v/100:v),Math.max(0,e)},le=(e,t)=>{const r=window.open("","","width=400,height=600");if(!r)return;const i=e.total-(e.discount||0),n=`\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Ticket R√©ception</title>\n        <style>\n          @page { margin: 0; }\n          body { \n            font-family: 'Courier New', monospace; \n            padding: 15px;\n            margin: 0;\n            font-size: 11px;\n            max-width: 350px;\n            color: #000;\n          }\n          h2 { text-align: center; font-size: 18px; margin: 10px 0; }\n          .divider { border-top: 1px dashed #000; margin: 10px 0; }\n          .double-line { border-top: 2px solid #000; margin: 10px 0; }\n          .line { display: flex; justify-content: space-between; margin: 3px 0; }\n          .center { text-align: center; }\n        </style>\n      </head>\n      <body>\n        <h2>YOU VOYAGE COMPANY</h2>\n        <p class="center">üè® TICKET R√âCEPTION</p>\n        <div class="double-line"></div>\n        <div class="line">\n          <span>Chambre:</span>\n          <strong>${t}</strong>\n        </div>\n        <div class="line">\n          <span>Ticket:</span>\n          <span>#${e.ticketNumber||e.id}</span>\n        </div>\n        <div class="line">\n          <span>Date:</span>\n          <span>${(new Date).toLocaleString("fr-FR")}</span>\n        </div>\n        <div class="divider"></div>\n        ${e.items?.map(e=>`\n          <div class="line">\n            <span>${e.quantity}x ${e.productName}</span>\n            <span>${e.total.toFixed(2)} MAD</span>\n          </div>\n        `).join("")||""}\n        <div class="double-line"></div>\n        <div class="line" style="font-weight: bold; font-size: 14px;">\n          <span>TOTAL:</span>\n          <span>${i.toFixed(2)} MAD</span>\n        </div>\n        ${"carte"===e.paymentMethod?'\n          <p class="center" style="margin-top: 10px; font-weight: bold;">\n            ‚úÖ PAY√â PAR CARTE\n          </p>\n        ':""}\n        <p class="center" style="font-size: 9px; margin-top: 15px;">\n          *** MERCI ***\n        </p>\n        <script>\n          window.onload = function() { \n            setTimeout(function() {\n              window.print(); \n              setTimeout(function() {\n                window.close();\n              }, 100);\n            }, 250);\n          }\n        <\/script>\n      </body>\n      </html>\n    `;r.document.write(n),r.document.close()},ce=(e,t,r,i)=>{const n=window.open("","","width=300,height=600");if(!n)return;const o=e.notes?.match(/(Chambre|Passage) \d+/)?.[0]||e.clientName||"N/A",s=e.notes?.includes(" - ")?e.notes.split(" - ").slice(1).join(" - "):"",d=`\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Re√ßu #${e.id}</title>\n        <style>\n          @page { margin: 0; }\n          body { \n            font-family: 'Courier New', monospace; \n            padding: 10px;\n            margin: 0;\n            font-size: 12px;\n            max-width: 280px;\n          }\n          h2 { text-align: center; margin: 10px 0; font-size: 16px; }\n          .divider { border-top: 1px dashed #000; margin: 8px 0; }\n          .line { display: flex; justify-content: space-between; margin: 3px 0; }\n          .total { font-weight: bold; font-size: 14px; margin-top: 5px; }\n          .center { text-align: center; }\n          .item { margin: 5px 0; }\n        </style>\n      </head>\n      <body>\n        <h2>YOU VOYAGE COMPANY</h2>\n        <p class="center" style="font-size: 10px; margin: 5px 0;">Tel: 06 16 73 41 71</p>\n        <div class="divider"></div>\n        <p><strong>Re√ßu #${e.id}</strong></p>\n        ${e.ticketNumber?`<p><strong>Ticket:</strong> ${e.ticketNumber}</p>`:""}\n        <p style="font-size: 10px;">${new Date(e.createdAt||new Date).toLocaleString("fr-FR")}</p>\n        <p><strong>Lieu:</strong> ${o}</p>\n        ${s?`<p><strong>Commentaire:</strong> ${s}</p>`:""}\n        <div class="divider"></div>\n        ${e.items?.map(e=>`\n          <div class="item">\n            <div class="line">\n              <span>${e.productName}</span>\n              <span>${e.price.toFixed(2)}</span>\n            </div>\n            <div class="line" style="font-size: 10px; padding-left: 10px;">\n              <span>x${e.quantity}</span>\n              <span><strong>${e.total.toFixed(2)} MAD</strong></span>\n            </div>\n          </div>\n        `).join("")||""}\n        <div class="divider"></div>\n        <div class="line">\n          <span>Sous-total:</span>\n          <span>${e.total.toFixed(2)} MAD</span>\n        </div>\n        ${v>0?`\n          <div class="line">\n            <span>Remise (${"percentage"===k?v+"%":v+" MAD"}):</span>\n            <span>-${(e.total-t).toFixed(2)} MAD</span>\n          </div>\n        `:""}\n        <div class="divider"></div>\n        <div class="line total">\n          <span>TOTAL:</span>\n          <span>${t.toFixed(2)} MAD</span>\n        </div>\n        <div class="line">\n          <span>Pay√© (${"espece"===i?"Esp√®ce":"carte"===i?"Carte":"Ch√®que"}):</span>\n          <span>${r.toFixed(2)} MAD</span>\n        </div>\n        ${r>t?`\n          <div class="line">\n            <span>Rendu:</span>\n            <span>${(r-t).toFixed(2)} MAD</span>\n          </div>\n        `:""}\n        ${r<t?`\n          <div class="line" style="color: red;">\n            <span>Reste √† payer:</span>\n            <span>${(t-r).toFixed(2)} MAD</span>\n          </div>\n        `:""}\n        <div class="divider"></div>\n        <p class="center" style="font-size: 10px; margin-top: 10px;">Merci de votre visite!</p>\n        <p class="center" style="font-size: 9px;">A bient√¥t</p>\n        <script>\n          window.onload = function() { \n            setTimeout(function() {\n              window.print(); \n              setTimeout(function() {\n                window.close();\n              }, 100);\n            }, 250);\n          }\n        <\/script>\n      </body>\n      </html>\n    `;n.document.write(d),n.document.close()},pe=(e,t,r)=>{const i=window.open("","","width=300,height=600");if(!i)return;const n=e.notes?.match(/(Chambre|Passage) \d+/)?.[0]||e.clientName||"N/A",o=e.notes?.includes(" - ")?e.notes.split(" - ").slice(1).join(" - "):"",s=r.reduce((e,t)=>e+t.amount,0),d=`\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Re√ßu #${e.id}</title>\n        <style>\n          @page { margin: 0; }\n          body { \n            font-family: 'Courier New', monospace; \n            padding: 10px;\n            margin: 0;\n            font-size: 12px;\n            max-width: 280px;\n          }\n          h2 { text-align: center; margin: 10px 0; font-size: 16px; }\n          .divider { border-top: 1px dashed #000; margin: 8px 0; }\n          .line { display: flex; justify-content: space-between; margin: 3px 0; }\n          .total { font-weight: bold; font-size: 14px; margin-top: 5px; }\n          .center { text-align: center; }\n          .item { margin: 5px 0; }\n        </style>\n      </head>\n      <body>\n        <h2>YOU VOYAGE COMPANY</h2>\n        <p class="center" style="font-size: 10px; margin: 5px 0;">Tel: 06 16 73 41 71</p>\n        <div class="divider"></div>\n        <p><strong>Re√ßu #${e.id}</strong></p>\n        ${e.ticketNumber?`<p><strong>Ticket:</strong> ${e.ticketNumber}</p>`:""}\n        <p style="font-size: 10px;">${new Date(e.createdAt||new Date).toLocaleString("fr-FR")}</p>\n        <p><strong>Lieu:</strong> ${n}</p>\n        ${o?`<p><strong>Commentaire:</strong> ${o}</p>`:""}\n        <div class="divider"></div>\n        ${e.items?.map(e=>`\n          <div class="item">\n            <div class="line">\n              <span>${e.productName}</span>\n              <span>${e.price.toFixed(2)}</span>\n            </div>\n            <div class="line" style="font-size: 10px; padding-left: 10px;">\n              <span>x${e.quantity}</span>\n              <span><strong>${e.total.toFixed(2)} MAD</strong></span>\n            </div>\n          </div>\n        `).join("")||""}\n        <div class="divider"></div>\n        <div class="line">\n          <span>Sous-total:</span>\n          <span>${e.total.toFixed(2)} MAD</span>\n        </div>\n        ${v>0?`\n          <div class="line">\n            <span>Remise (${"percentage"===k?v+"%":v+" MAD"}):</span>\n            <span>-${(e.total-t).toFixed(2)} MAD</span>\n          </div>\n        `:""}\n        <div class="divider"></div>\n        <div class="line total">\n          <span>TOTAL:</span>\n          <span>${t.toFixed(2)} MAD</span>\n        </div>\n        <div class="divider"></div>\n        <p style="font-weight: bold; margin: 5px 0;">PAIEMENTS MULTIPLES:</p>\n        ${r.map((e,t)=>`\n          <div class="line" style="font-size: 11px;">\n            <span>${t+1}. ${e.method}:</span>\n            <span>${e.amount.toFixed(2)} MAD</span>\n          </div>\n        `).join("")}\n        <div class="divider"></div>\n        <div class="line total">\n          <span>Total pay√©:</span>\n          <span>${s.toFixed(2)} MAD</span>\n        </div>\n        ${s<t?`\n          <div class="line" style="color: red; font-weight: bold;">\n            <span>Reste √† payer:</span>\n            <span>${(t-s).toFixed(2)} MAD</span>\n          </div>\n        `:""}\n        ${s>t?`\n          <div class="line">\n            <span>Rendu:</span>\n            <span>${(s-t).toFixed(2)} MAD</span>\n          </div>\n        `:""}\n        <div class="divider"></div>\n        <p class="center" style="font-size: 10px; margin-top: 10px;">Merci de votre visite!</p>\n        <p class="center" style="font-size: 9px;">A bient√¥t</p>\n        <script>\n          window.onload = function() { \n            setTimeout(function() {\n              window.print(); \n              setTimeout(function() {\n                window.close();\n              }, 100);\n            }, 250);\n          }\n        <\/script>\n      </body>\n      </html>\n    `;i.document.write(d),i.document.close()},me=async()=>{if(U.trim())try{const e=await s.searchByTicket(U);V(e),Z(!0)}catch(e){404===e.response?.status?alert("Ticket non trouv√©"):alert("Erreur lors de la recherche du ticket")}else alert("Veuillez entrer un num√©ro de ticket")},xe=e.filter(e=>e.clientName?.toLowerCase().includes(p.toLowerCase())||e.notes?.toLowerCase().includes(p.toLowerCase())||e.id.toString().includes(p)),he=y.find(e=>e.id===b);return r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[r.jsx("h2",{style:{fontSize:"1.8rem",color:"#333",margin:0},children:"Caisse - Tableau de bord"}),r.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[r.jsx("button",{onClick:async()=>{const t=e.filter(e=>"en_attente"===e.status);if(t.length>0)alert(`‚ö†Ô∏è CL√îTURE IMPOSSIBLE ‚ö†Ô∏è\n\nIl reste ${t.length} commande(s) en attente.\n\nVous devez d'abord cl√¥turer TOUTES les commandes\n(paiement ou annulation) avant de g√©n√©rer le Rapport Z.`);else try{const e=await s.getZReport();L(e),F(!0)}catch(r){alert("Erreur lors du chargement du Rapport Z"),console.error(r)}},style:{padding:"0.75rem 1.5rem",background:"#28a745",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600",boxShadow:"0 2px 5px rgba(40, 167, 69, 0.3)"},children:"üìä Rapport Z"}),r.jsx("button",{onClick:ie,style:{padding:"0.75rem 1.5rem",background:"#667eea",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"üîÑ Actualiser"})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",borderBottom:"2px solid #dee2e6"},children:[r.jsx("button",{onClick:()=>q("commandes"),style:{padding:"1rem 2rem",background:"commandes"===O?"#667eea":"transparent",color:"commandes"===O?"white":"#667eea",border:"none",borderBottom:"commandes"===O?"none":"2px solid transparent",borderRadius:"8px 8px 0 0",cursor:"pointer",fontWeight:"600",fontSize:"1rem",transition:"all 0.2s"},children:"üìã Gestion des Commandes"}),r.jsx("button",{onClick:()=>q("produits"),style:{padding:"1rem 2rem",background:"produits"===O?"#667eea":"transparent",color:"produits"===O?"white":"#667eea",border:"none",borderBottom:"produits"===O?"none":"2px solid transparent",borderRadius:"8px 8px 0 0",cursor:"pointer",fontWeight:"600",fontSize:"1rem",transition:"all 0.2s"},children:"üçΩÔ∏è Produits & Cat√©gories"}),r.jsx("button",{onClick:()=>q("imprimantes"),style:{padding:"1rem 2rem",background:"imprimantes"===O?"#667eea":"transparent",color:"imprimantes"===O?"white":"#667eea",border:"none",borderBottom:"imprimantes"===O?"none":"2px solid transparent",borderRadius:"8px 8px 0 0",cursor:"pointer",fontWeight:"600",fontSize:"1rem",transition:"all 0.2s"},children:"üñ®Ô∏è Imprimantes"})]}),"commandes"===O?r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1.5rem",marginBottom:"2rem"},children:[r.jsxs("div",{style:{background:"white",padding:"1.5rem",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[r.jsx("h3",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.5rem"},children:"CA Journalier"}),r.jsxs("p",{style:{fontSize:"2rem",fontWeight:"700",color:"#28a745"},children:[a?.totalSales?.toFixed(2)||0," MAD"]})]}),r.jsxs("div",{style:{background:"white",padding:"1.5rem",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[r.jsx("h3",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.5rem"},children:"Commandes pay√©es"}),r.jsx("p",{style:{fontSize:"2rem",fontWeight:"700",color:"#667eea"},children:a?.orderCount||0})]}),r.jsxs("div",{style:{background:"white",padding:"1.5rem",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[r.jsx("h3",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.5rem"},children:"En attente"}),r.jsx("p",{style:{fontSize:"2rem",fontWeight:"700",color:"#ffc107"},children:e.filter(e=>"en_attente"===e.status).length})]})]}),r.jsx("div",{style:{marginBottom:"1.5rem"},children:r.jsx("input",{type:"text",placeholder:"üîç Rechercher par client, chambre, passage ou ID...",value:p,onChange:e=>m(e.target.value),style:{width:"100%",padding:"0.75rem 1rem",border:"2px solid #667eea",borderRadius:"8px",fontSize:"1rem",outline:"none"}})}),r.jsxs("div",{style:{background:"white",padding:"1.5rem",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",marginBottom:"1.5rem"},children:[r.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:"#667eea"},children:"üé´ Rechercher un ticket"}),r.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[r.jsx("input",{type:"text",placeholder:"Entrer le num√©ro de ticket (ex: 20231205-12345)",value:U,onChange:e=>G(e.target.value),onKeyPress:e=>"Enter"===e.key&&me(),style:{flex:1,padding:"0.75rem 1rem",border:"2px solid #dee2e6",borderRadius:"5px",fontSize:"1rem",outline:"none"}}),r.jsx("button",{onClick:me,style:{padding:"0.75rem 1.5rem",background:"#17a2b8",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600",whiteSpace:"nowrap"},children:"üîç Rechercher"})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:n?"1fr 1.5fr":"1fr",gap:"1.5rem"},children:[r.jsxs("div",{style:{background:"white",borderRadius:"10px",overflow:"hidden",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[r.jsxs("h3",{style:{padding:"1rem",margin:0,background:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:["Commandes (",xe.length,")"]}),r.jsx("div",{style:{maxHeight:"600px",overflowY:"auto"},children:0===xe.length?r.jsx("div",{style:{padding:"3rem",textAlign:"center",color:"#999"},children:r.jsx("p",{children:"Aucune commande"})}):xe.map(e=>r.jsxs("div",{onClick:()=>se(e.id),style:{padding:"1rem",borderBottom:"1px solid #dee2e6",cursor:"pointer",background:n?.id===e.id?"#f0f4ff":"white",transition:"background 0.2s"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsxs("div",{children:[r.jsxs("strong",{children:["#",e.id," - ",e.clientName||"N/A"]}),e.ticketNumber&&r.jsxs("div",{style:{fontSize:"0.75rem",color:"#667eea",marginTop:"0.25rem"},children:["üé´ ",e.ticketNumber]}),"payee"===e.status&&r.jsx("div",{style:{fontSize:"0.75rem",color:"#dc3545",marginTop:"0.25rem",fontWeight:"600"},children:"üîí Ticket verrouill√©"})]}),r.jsx("span",{style:{padding:"0.25rem 0.75rem",background:"payee"===e.status?"#28a745":"en_attente"===e.status?"#ffc107":"#dc3545",color:"white",borderRadius:"20px",fontSize:"0.75rem"},children:e.status})]}),r.jsxs("div",{style:{fontSize:"0.85rem",color:"#666"},children:[e.notes&&r.jsx("div",{children:e.notes}),r.jsx("div",{children:new Date(e.createdAt||"").toLocaleString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]}),r.jsxs("div",{style:{fontWeight:"600",color:"#28a745",marginTop:"0.5rem"},children:[e.total.toFixed(2)," MAD"]})]},e.id))})]}),n&&r.jsxs("div",{style:{background:"white",borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column"},children:[r.jsxs("div",{style:{padding:"1rem",background:"#f8f9fa",borderBottom:"2px solid #dee2e6",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("h3",{style:{margin:0},children:["Commande #",n.id]}),r.jsx("button",{onClick:()=>o(null),style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer"},children:"√ó"})]}),r.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"1.5rem"},children:[r.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Client:"})," ",n.clientName||"N/A"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Notes:"})," ",n.notes||"N/A"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Serveur:"})," ",n.prenom," ",n.nom]}),r.jsxs("p",{style:{margin:0},children:[r.jsx("strong",{children:"Date:"})," ",new Date(n.createdAt).toLocaleString("fr-FR")]})]}),h&&r.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#fff3cd",borderRadius:"8px",border:"2px solid #ffc107"},children:[r.jsx("h4",{style:{marginTop:0,color:"#856404"},children:"Ajouter des articles"}),r.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",flexWrap:"wrap"},children:y.map(e=>r.jsx("button",{onClick:()=>j(e.id),style:{padding:"0.5rem 1rem",background:b===e.id?"#667eea":"white",color:b===e.id?"white":"#333",border:"2px solid #667eea",borderRadius:"20px",cursor:"pointer",fontSize:"0.85rem"},children:e.name},e.id))}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"0.75rem"},children:he?.products?.map(e=>r.jsxs("div",{onClick:()=>(async e=>{if(n)try{await s.addItems(n.id,[{productId:e.id,productName:e.name,quantity:1,price:e.price}]),se(n.id),alert("Article ajout√© !")}catch(t){alert(t.response?.data?.error||"Erreur")}})(e),style:{padding:"0.75rem",background:"white",border:"2px solid #667eea",borderRadius:"8px",cursor:"pointer",textAlign:"center",fontSize:"0.85rem"},children:[r.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:e.name}),r.jsxs("div",{style:{color:"#28a745",fontWeight:"700"},children:[e.price.toFixed(2)," MAD"]})]},e.id))})]}),r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsxs("h4",{style:{margin:0},children:["Articles (",n.items?.length||0,")"]}),"payee"!==n.status&&r.jsx("button",{onClick:()=>g(!h),style:{padding:"0.5rem 1rem",background:h?"#dc3545":"#667eea",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"0.85rem"},children:h?"‚úì Terminer":"‚úèÔ∏è Modifier"}),"payee"===n.status&&r.jsx("div",{style:{padding:"0.5rem 1rem",background:"#f8f9fa",color:"#666",border:"2px solid #dee2e6",borderRadius:"5px",fontSize:"0.85rem",fontWeight:"600"},children:"üîí Ticket verrouill√©"})]}),n.items&&n.items.length>0?r.jsx("div",{children:n.items.map((e,t)=>r.jsxs("div",{style:{padding:"0.75rem",background:"#f8f9fa",marginBottom:"0.5rem",borderRadius:"5px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontWeight:"600"},children:e.productName}),r.jsxs("div",{style:{fontSize:"0.85rem",color:"#666"},children:[e.price.toFixed(2)," MAD"]})]}),h?r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>de(t,e.quantity-1),style:{padding:"0.25rem 0.5rem",background:"#dc3545",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:"-"}),r.jsx("span",{style:{minWidth:"30px",textAlign:"center",fontWeight:"600"},children:e.quantity}),r.jsx("button",{onClick:()=>de(t,e.quantity+1),style:{padding:"0.25rem 0.5rem",background:"#28a745",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:"+"}),r.jsx("button",{onClick:()=>(e=>{if(!n)return;const t=n.items.filter((t,r)=>r!==e);o({...n,items:t,total:t.reduce((e,t)=>e+t.total,0)})})(t),style:{padding:"0.25rem 0.5rem",background:"#dc3545",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",marginLeft:"0.5rem"},children:"üóëÔ∏è"}),r.jsxs("div",{style:{fontWeight:"700",color:"#28a745",minWidth:"70px",textAlign:"right"},children:[e.total.toFixed(2)," MAD"]})]}):r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsxs("span",{children:["x",e.quantity]}),r.jsxs("div",{style:{fontWeight:"700",color:"#28a745",minWidth:"70px",textAlign:"right"},children:[e.total.toFixed(2)," MAD"]})]})]},t))}):r.jsx("p",{style:{textAlign:"center",color:"#999",padding:"2rem"},children:"Aucun article"}),h&&r.jsx("button",{onClick:async()=>{if(n)try{await s.update(n.id,{items:n.items}),alert("Commande mise √† jour !"),g(!1),ie(),se(n.id)}catch(e){alert("Erreur lors de la mise √† jour")}},style:{width:"100%",padding:"0.75rem",background:"#28a745",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600",marginTop:"1rem"},children:"üíæ Enregistrer les modifications"})]}),!h&&r.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#e7f3ff",borderRadius:"8px"},children:[r.jsx("h4",{style:{marginTop:0},children:"Remise"}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:[r.jsx("button",{onClick:()=>S("percentage"),style:{flex:1,padding:"0.5rem",background:"percentage"===k?"#667eea":"white",color:"percentage"===k?"white":"#333",border:"2px solid #667eea",borderRadius:"5px",cursor:"pointer"},children:"Pourcentage (%)"}),r.jsx("button",{onClick:()=>S("amount"),style:{flex:1,padding:"0.5rem",background:"amount"===k?"#667eea":"white",color:"amount"===k?"white":"#333",border:"2px solid #667eea",borderRadius:"5px",cursor:"pointer"},children:"Montant (MAD)"})]}),r.jsx("input",{type:"number",value:v,onChange:e=>w(Math.max(0,parseFloat(e.target.value)||0)),placeholder:"percentage"===k?"0%":"0 MAD",style:{width:"100%",padding:"0.5rem",border:"2px solid #667eea",borderRadius:"5px",fontSize:"1rem"}})]}),r.jsxs("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsx("span",{children:"Sous-total:"}),r.jsxs("span",{children:[n.total.toFixed(2)," MAD"]})]}),v>0&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem",color:"#dc3545"},children:[r.jsxs("span",{children:["Remise (","percentage"===k?`${v}%`:`${v} MAD`,"):"]}),r.jsxs("span",{children:["-",(n.total-ae()).toFixed(2)," MAD"]})]}),r.jsx("div",{style:{borderTop:"2px solid #dee2e6",paddingTop:"0.5rem",marginTop:"0.5rem"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.2rem",fontWeight:"700",color:"#28a745"},children:[r.jsx("span",{children:"TOTAL:"}),r.jsxs("span",{children:[ae().toFixed(2)," MAD"]})]})})]})]}),!h&&"en_attente"===n.status&&r.jsxs("div",{style:{padding:"1rem",background:"#f8f9fa",borderTop:"2px solid #dee2e6"},children:[r.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:r.jsx("button",{onClick:()=>T(!0),style:{padding:"0.75rem",background:"#ffc107",color:"#333",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"üîÑ Transf√©rer"})}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>N(!0),style:{flex:1,padding:"1rem",background:"#28a745",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"700",fontSize:"1rem"},children:"üí∞ PAYER"}),r.jsx("button",{onClick:()=>{J(!0),K([]),ee(0)},style:{flex:1,padding:"1rem",background:"#17a2b8",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"700",fontSize:"1rem"},children:"üë• PAIEMENTS MULTIPLES"}),r.jsx("button",{onClick:()=>(async e=>{const t=prompt("Num√©ro de chambre:");if(t)try{await d.post(`/orders/${e.id}/send-reception`,{roomNumber:t}),"carte"===e.paymentMethod&&le(e,t),alert(`Ticket envoy√© √† la chambre ${t}!`),ie()}catch(r){alert("Erreur lors de l'envoi √† la r√©ception")}})(n),style:{flex:1,padding:"1rem",background:"#ff6b6b",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"700",fontSize:"1rem"},children:"üè® TICKET R√âCEPTION"})]}),r.jsxs("div",{style:{textAlign:"center",marginTop:"0.5rem",fontSize:"1.1rem",fontWeight:"600",color:"#667eea"},children:["Total: ",ae().toFixed(2)," MAD"]})]}),"payee"===n.status&&r.jsxs("div",{style:{padding:"1.5rem",background:"#f8f9fa",borderTop:"2px solid #dee2e6",textAlign:"center"},children:[r.jsx("div",{style:{color:"#28a745",fontSize:"1.1rem",fontWeight:"600",marginBottom:"0.5rem"},children:"üîí Ticket Pay√© et Verrouill√©"}),r.jsx("div",{style:{color:"#666",fontSize:"0.9rem"},children:"Ce ticket ne peut plus √™tre modifi√©, transf√©r√© ou supprim√©."})]})]})]}),z&&r.jsx("div",{onClick:()=>T(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{onClick:e=>e.stopPropagation(),style:{background:"white",padding:"2rem",borderRadius:"15px",maxWidth:"500px",width:"90%"},children:[r.jsxs("h3",{style:{marginTop:0},children:["Transf√©rer la commande #",n?.id]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Type"}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>B("chambre"),style:{flex:1,padding:"0.75rem",background:"chambre"===R?"#667eea":"white",color:"chambre"===R?"white":"#333",border:"2px solid #667eea",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"Chambre"}),r.jsx("button",{onClick:()=>B("passage"),style:{flex:1,padding:"0.75rem",background:"passage"===R?"#667eea":"white",color:"passage"===R?"white":"#333",border:"2px solid #667eea",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"Passage"})]})]}),r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Num√©ro"}),r.jsx("input",{type:"text",value:C,onChange:e=>A(e.target.value),placeholder:"chambre"===R?"Ex: 01":"Ex: 1",style:{width:"100%",padding:"0.75rem",border:"2px solid #667eea",borderRadius:"5px",fontSize:"1rem"}})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsx("button",{onClick:()=>T(!1),style:{flex:1,padding:"0.75rem",background:"#dc3545",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"Annuler"}),r.jsx("button",{onClick:async()=>{if(n&&C)try{const e=`${"chambre"===R?"Chambre":"Passage"} ${C}`;await s.update(n.id,{clientName:e,notes:e}),alert(`Commande transf√©r√©e vers ${e}`),T(!1),ie(),se(n.id)}catch(e){alert("Erreur lors du transfert")}},style:{flex:1,padding:"0.75rem",background:"#28a745",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"Confirmer"})]})]})}),E&&r.jsx("div",{onClick:()=>N(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{onClick:e=>e.stopPropagation(),style:{background:"white",padding:"2rem",borderRadius:"15px",maxWidth:"500px",width:"90%"},children:[r.jsxs("h3",{style:{marginTop:0},children:["Paiement - Commande #",n?.id]}),r.jsx("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",marginBottom:"1.5rem"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.2rem",fontWeight:"700",color:"#28a745"},children:[r.jsx("span",{children:"Montant √† payer:"}),r.jsxs("span",{children:[ae().toFixed(2)," MAD"]})]})}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Mode de paiement"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>M("espece"),style:{padding:"0.75rem",background:"espece"===D?"#28a745":"white",color:"espece"===D?"white":"#333",border:"2px solid #28a745",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"üíµ Esp√®ce"}),r.jsx("button",{onClick:()=>M("carte"),style:{padding:"0.75rem",background:"carte"===D?"#28a745":"white",color:"carte"===D?"white":"#333",border:"2px solid #28a745",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"üí≥ Carte"}),r.jsx("button",{onClick:()=>M("cheque"),style:{padding:"0.75rem",background:"cheque"===D?"#28a745":"white",color:"cheque"===D?"white":"#333",border:"2px solid #28a745",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"üìù Ch√®que"})]})]}),r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Montant re√ßu (MAD)"}),r.jsx("input",{type:"number",value:W,onChange:e=>I(parseFloat(e.target.value)||0),style:{width:"100%",padding:"0.75rem",border:"2px solid #28a745",borderRadius:"5px",fontSize:"1.2rem",fontWeight:"600"}}),W>ae()&&r.jsxs("p",{style:{color:"#28a745",marginTop:"0.5rem",fontWeight:"600"},children:["Rendu: ",(W-ae()).toFixed(2)," MAD"]}),W<ae()&&W>0&&r.jsxs("p",{style:{color:"#dc3545",marginTop:"0.5rem",fontWeight:"600"},children:["Reste: ",(ae()-W).toFixed(2)," MAD (Paiement partiel)"]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsx("button",{onClick:()=>N(!1),style:{flex:1,padding:"0.75rem",background:"#dc3545",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"Annuler"}),r.jsx("button",{onClick:async()=>{if(!n)return;const e=ae();if(W<e){const t=e-W;if(!window.confirm(`Paiement partiel de ${W.toFixed(2)} MAD\nReste √† payer: ${t.toFixed(2)} MAD\nContinuer ?`))return}try{await s.update(n.id,{status:"payee",paymentMethod:D,discount:v,discountType:k,paidAmount:W}),ce(n,e,W,D),alert("Paiement enregistr√© !"),N(!1),o(null),ie(),ne()}catch(t){alert("Erreur lors du paiement")}},disabled:W<=0,style:{flex:1,padding:"0.75rem",background:W>0?"#28a745":"#ccc",color:"white",border:"none",borderRadius:"5px",cursor:W>0?"pointer":"not-allowed",fontWeight:"600"},children:"Confirmer le paiement"})]})]})}),Q&&r.jsx("div",{onClick:()=>J(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{onClick:e=>e.stopPropagation(),style:{background:"white",padding:"2rem",borderRadius:"15px",maxWidth:"600px",width:"90%",maxHeight:"90vh",overflowY:"auto"},children:[r.jsxs("h3",{style:{marginTop:0},children:["üë• Paiements Multiples - Commande #",n?.id]}),r.jsxs("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsx("span",{style:{fontWeight:"600"},children:"Montant total:"}),r.jsxs("span",{style:{fontSize:"1.2rem",fontWeight:"700",color:"#667eea"},children:[ae().toFixed(2)," MAD"]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsx("span",{style:{fontWeight:"600"},children:"D√©j√† pay√©:"}),r.jsxs("span",{style:{fontSize:"1.1rem",fontWeight:"700",color:"#28a745"},children:[_.reduce((e,t)=>e+t.amount,0).toFixed(2)," MAD"]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",borderTop:"2px solid #dee2e6",paddingTop:"0.5rem"},children:[r.jsx("span",{style:{fontWeight:"700"},children:"Reste √† payer:"}),r.jsxs("span",{style:{fontSize:"1.2rem",fontWeight:"700",color:"#dc3545"},children:[(ae()-_.reduce((e,t)=>e+t.amount,0)).toFixed(2)," MAD"]})]})]}),_.length>0&&r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("h4",{style:{marginBottom:"0.75rem"},children:"Paiements enregistr√©s:"}),r.jsx("div",{style:{background:"#f8f9fa",borderRadius:"8px",padding:"0.75rem"},children:_.map((e,t)=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",background:"white",borderRadius:"5px",marginBottom:t<_.length-1?"0.5rem":0},children:[r.jsxs("span",{style:{fontWeight:"600"},children:[t+1,". ",e.method]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsxs("span",{style:{fontSize:"1.1rem",fontWeight:"700",color:"#28a745"},children:[e.amount.toFixed(2)," MAD"]}),r.jsx("button",{onClick:()=>{return e=t,void K(_.filter((t,r)=>r!==e));var e},style:{padding:"0.25rem 0.5rem",background:"#dc3545",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:"üóëÔ∏è"})]})]},t))})]}),r.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#e7f3ff",borderRadius:"8px"},children:[r.jsx("h4",{style:{marginTop:0},children:"Ajouter un paiement:"}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Mode de paiement"}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>re("espece"),style:{padding:"0.75rem",background:"espece"===te?"#28a745":"white",color:"espece"===te?"white":"#333",border:"2px solid #28a745",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"üíµ Esp√®ce"}),r.jsx("button",{onClick:()=>re("carte"),style:{padding:"0.75rem",background:"carte"===te?"#28a745":"white",color:"carte"===te?"white":"#333",border:"2px solid #28a745",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"üí≥ Carte"}),r.jsx("button",{onClick:()=>re("cheque"),style:{padding:"0.75rem",background:"cheque"===te?"#28a745":"white",color:"cheque"===te?"white":"#333",border:"2px solid #28a745",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"üìù Ch√®que"})]})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Montant (MAD)"}),r.jsx("input",{type:"number",value:X||"",onChange:e=>ee(parseFloat(e.target.value)||0),placeholder:"Montant √† payer",style:{width:"100%",padding:"0.75rem",border:"2px solid #17a2b8",borderRadius:"5px",fontSize:"1.1rem",fontWeight:"600"}})]}),r.jsx("button",{onClick:()=>{if(X<=0)return void alert("Montant invalide");const e=ae(),t=_.reduce((e,t)=>e+t.amount,0)+X;if(t>e)return void alert(`Le total des paiements (${t.toFixed(2)} MAD) d√©passe le montant √† payer (${e.toFixed(2)} MAD)`);const r="espece"===te?"Esp√®ce":"carte"===te?"Carte":"Ch√®que";K([..._,{method:r,amount:X}]),ee(0)},disabled:X<=0,style:{width:"100%",padding:"0.75rem",background:X>0?"#17a2b8":"#ccc",color:"white",border:"none",borderRadius:"5px",cursor:X>0?"pointer":"not-allowed",fontWeight:"600"},children:"‚ûï Ajouter ce paiement"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[r.jsx("button",{onClick:()=>{J(!1),K([])},style:{flex:1,padding:"0.75rem",background:"#dc3545",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"Annuler"}),r.jsx("button",{onClick:async()=>{if(!n||0===_.length)return;const e=ae(),t=_.reduce((e,t)=>e+t.amount,0);if(t<e){const r=e-t;if(!window.confirm(`Total pay√©: ${t.toFixed(2)} MAD\nReste √† payer: ${r.toFixed(2)} MAD\n\nValider ce paiement partiel ?`))return}try{await s.update(n.id,{status:t>=e?"payee":"en_attente",paymentMethod:"mixte",discount:v,discountType:k,paidAmount:t}),pe(n,e,_),alert("Paiement enregistr√© !"),J(!1),K([]),o(null),ie(),ne()}catch(r){alert("Erreur lors du paiement")}},disabled:0===_.length,style:{flex:1,padding:"0.75rem",background:_.length>0?"#28a745":"#ccc",color:"white",border:"none",borderRadius:"5px",cursor:_.length>0?"pointer":"not-allowed",fontWeight:"600"},children:"‚úÖ Valider le paiement"})]})]})})]}):"produits"===O?r.jsx(u,{}):"imprimantes"===O?r.jsx(x,{}):null,$&&P&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"10px",width:"90%",maxWidth:"800px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 10px 40px rgba(0,0,0,0.3)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[r.jsx("h2",{style:{margin:0,color:"#333"},children:"üìä Rapport Z"}),r.jsx("button",{onClick:()=>F(!1),style:{background:"#dc3545",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"‚úï Fermer"})]}),r.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#f8f9fa",borderRadius:"8px"},children:[r.jsxs("p",{style:{margin:0,fontSize:"1.1rem"},children:[r.jsx("strong",{children:"Date:"})," ",new Date(P.date).toLocaleDateString("fr-FR")]}),r.jsxs("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.9rem",color:"#666"},children:["Imprim√© le: ",(new Date).toLocaleString("fr-FR")]})]}),r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsx("h3",{style:{padding:"0.75rem",background:"#667eea",color:"white",margin:"0 0 1rem 0",borderRadius:"5px"},children:"Articles vendus"}),r.jsx("div",{style:{border:"1px solid #dee2e6",borderRadius:"8px",overflow:"hidden"},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{background:"#f8f9fa"},children:[r.jsx("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid #dee2e6",color:"#333"},children:"Article"}),r.jsx("th",{style:{padding:"0.75rem",textAlign:"center",borderBottom:"2px solid #dee2e6",color:"#333"},children:"Qt√©"}),r.jsx("th",{style:{padding:"0.75rem",textAlign:"right",borderBottom:"2px solid #dee2e6",color:"#333"},children:"Prix unit."}),r.jsx("th",{style:{padding:"0.75rem",textAlign:"right",borderBottom:"2px solid #dee2e6",color:"#333"},children:"Total"})]})}),r.jsx("tbody",{children:P.itemsSummary.map((e,t)=>r.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[r.jsx("td",{style:{padding:"0.75rem",color:"#333"},children:e.name}),r.jsx("td",{style:{padding:"0.75rem",textAlign:"center",fontWeight:"600",color:"#333"},children:e.quantity}),r.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",color:"#333"},children:[e.price.toFixed(2)," MAD"]}),r.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",fontWeight:"600",color:"#333"},children:[e.total.toFixed(2)," MAD"]})]},t))})]})})]}),P.drinksDetails&&P.drinksDetails.length>0&&r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsx("h3",{style:{padding:"0.75rem",background:"#17a2b8",color:"white",margin:"0 0 1rem 0",borderRadius:"5px"},children:"ü•§ D√©tails des Boissons"}),r.jsx("div",{style:{border:"1px solid #dee2e6",borderRadius:"8px",overflow:"hidden"},children:r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{background:"#f8f9fa"},children:[r.jsx("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid #dee2e6",color:"#333"},children:"Boisson"}),r.jsx("th",{style:{padding:"0.75rem",textAlign:"center",borderBottom:"2px solid #dee2e6",color:"#333"},children:"Qt√©"}),r.jsx("th",{style:{padding:"0.75rem",textAlign:"right",borderBottom:"2px solid #dee2e6",color:"#333"},children:"Prix unit."}),r.jsx("th",{style:{padding:"0.75rem",textAlign:"right",borderBottom:"2px solid #dee2e6",color:"#333"},children:"Total"})]})}),r.jsxs("tbody",{children:[P.drinksDetails.map((e,t)=>r.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[r.jsx("td",{style:{padding:"0.75rem",color:"#333"},children:r.jsx("strong",{children:e.name})}),r.jsx("td",{style:{padding:"0.75rem",textAlign:"center",fontWeight:"600",color:"#17a2b8"},children:e.quantity}),r.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",color:"#333"},children:[e.price.toFixed(2)," MAD"]}),r.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",fontWeight:"600",color:"#17a2b8"},children:[e.total.toFixed(2)," MAD"]})]},t)),r.jsxs("tr",{style:{background:"#e3f2fd",fontWeight:"700"},children:[r.jsx("td",{colSpan:2,style:{padding:"0.75rem",textAlign:"right",color:"#333"},children:"TOTAL BOISSONS:"}),r.jsxs("td",{colSpan:2,style:{padding:"0.75rem",textAlign:"right",fontSize:"1.1rem",color:"#17a2b8"},children:[P.drinksDetails.reduce((e,t)=>e+t.total,0).toFixed(2)," MAD"]})]})]})]})})]}),r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsx("h3",{style:{padding:"0.75rem",background:"#28a745",color:"white",margin:"0 0 1rem 0",borderRadius:"5px"},children:"Modes de paiement"}),r.jsx("div",{style:{display:"grid",gap:"1rem"},children:P.paymentSummary.map((e,t)=>r.jsx("div",{style:{padding:"1rem",background:"#f8f9fa",borderRadius:"8px",border:"2px solid #dee2e6"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{children:[r.jsx("strong",{style:{fontSize:"1.1rem",color:"#333"},children:"espece"===e.paymentMethod?"üíµ Esp√®ce":"carte"===e.paymentMethod?"üí≥ Carte":"üìù Ch√®que"}),r.jsxs("p",{style:{margin:"0.25rem 0 0 0",color:"#666",fontSize:"0.9rem"},children:[e.count," commande",e.count>1?"s":""]})]}),r.jsxs("div",{style:{textAlign:"right"},children:[r.jsxs("p",{style:{margin:0,fontSize:"1.5rem",fontWeight:"700",color:"#28a745"},children:[e.total.toFixed(2)," MAD"]}),e.paidAmount!==e.total&&r.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.85rem",color:"#666"},children:["Montant per√ßu: ",e.paidAmount.toFixed(2)," MAD"]})]})]})},t))})]}),r.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"10px",color:"white",marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[r.jsx("span",{children:"Nombre de commandes:"}),r.jsx("strong",{style:{fontSize:"1.2rem"},children:P.orders})]}),r.jsx("div",{style:{borderTop:"1px solid rgba(255,255,255,0.3)",margin:"0.75rem 0"}}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsx("span",{children:"Ventes brutes:"}),r.jsxs("strong",{children:[P.totalSales.toFixed(2)," MAD"]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.75rem"},children:[r.jsx("span",{children:"Remises accord√©es:"}),r.jsxs("strong",{children:["-",P.totalDiscount.toFixed(2)," MAD"]})]}),r.jsx("div",{style:{borderTop:"2px solid rgba(255,255,255,0.5)",margin:"0.75rem 0"}}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{style:{fontSize:"1.3rem"},children:"TOTAL NET:"}),r.jsxs("strong",{style:{fontSize:"1.8rem"},children:[(P.totalSales-P.totalDiscount).toFixed(2)," MAD"]})]})]}),e.filter(e=>"en_attente"===e.status).length>0&&r.jsxs("div",{style:{padding:"1rem",background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%)",color:"white",borderRadius:"8px",marginBottom:"1rem",textAlign:"center",fontWeight:"600",fontSize:"0.95rem",boxShadow:"0 4px 10px rgba(255, 107, 107, 0.3)"},children:["‚ö†Ô∏è CL√îTURER D'ABORD LES ",e.filter(e=>"en_attente"===e.status).length," COMMANDE(S) EN ATTENTE"]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsx("button",{onClick:()=>{if(!P)return;const e=window.open("","","width=400,height=700");if(!e)return;const t=`\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Rapport Z - ${P.date}</title>\n        <style>\n          @page { margin: 0; }\n          body { \n            font-family: 'Courier New', monospace; \n            padding: 15px;\n            margin: 0;\n            font-size: 11px;\n            max-width: 350px;\n          }\n          h2, h3 { text-align: center; margin: 10px 0; }\n          h2 { font-size: 18px; }\n          h3 { font-size: 14px; border-bottom: 2px solid #000; padding-bottom: 5px; }\n          .divider { border-top: 1px dashed #000; margin: 10px 0; }\n          .double-line { border-top: 2px solid #000; margin: 10px 0; }\n          .line { display: flex; justify-content: space-between; margin: 3px 0; }\n          .total { font-weight: bold; font-size: 13px; margin-top: 5px; }\n          .center { text-align: center; }\n          .section { margin: 15px 0; }\n          .item-line { margin: 2px 0; font-size: 10px; }\n        </style>\n      </head>\n      <body>\n        <h2>YOU VOYAGE COMPANY</h2>\n        <p class="center" style="font-size: 10px;">Tel: 06 16 73 41 71</p>\n        <div class="double-line"></div>\n        <h3>RAPPORT Z</h3>\n        <p class="center"><strong>Date: ${new Date(P.date).toLocaleDateString("fr-FR")}</strong></p>\n        <p class="center" style="font-size: 9px;">Imprim√© le: ${(new Date).toLocaleString("fr-FR")}</p>\n        <div class="divider"></div>\n        \n        <div class="section">\n          <h3>ARTICLES VENDUS</h3>\n          ${P.itemsSummary.map(e=>`\n            <div class="item-line">\n              <div class="line">\n                <span>${e.name}</span>\n                <span>x${e.quantity}</span>\n              </div>\n              <div class="line" style="padding-left: 20px;">\n                <span>${e.price.toFixed(2)} MAD/u</span>\n                <span><strong>${e.total.toFixed(2)} MAD</strong></span>\n              </div>\n            </div>\n          `).join("")}\n        </div>\n        \n        <div class="divider"></div>\n        \n        ${P.drinksDetails&&P.drinksDetails.length>0?`\n        <div class="section">\n          <h3>ü•§ D√âTAILS BOISSONS</h3>\n          ${P.drinksDetails.map(e=>`\n            <div class="item-line">\n              <div class="line">\n                <span>${e.name}</span>\n                <span>x${e.quantity}</span>\n              </div>\n              <div class="line" style="padding-left: 20px;">\n                <span>${e.price.toFixed(2)} MAD/u</span>\n                <span><strong>${e.total.toFixed(2)} MAD</strong></span>\n              </div>\n            </div>\n          `).join("")}\n          <div class="double-line"></div>\n          <div class="line total">\n            <span>TOTAL BOISSONS:</span>\n            <span>${P.drinksDetails.reduce((e,t)=>e+t.total,0).toFixed(2)} MAD</span>\n          </div>\n        </div>\n        \n        <div class="divider"></div>\n        `:""}\n        \n        <div class="section">\n          <h3>MODES DE PAIEMENT</h3>\n          ${P.paymentSummary.map(e=>`\n            <div class="line">\n              <span>${"espece"===e.paymentMethod?"Esp√®ce":"carte"===e.paymentMethod?"Carte":"Ch√®que"} (${e.count} commande${e.count>1?"s":""}):</span>\n              <span><strong>${e.total.toFixed(2)} MAD</strong></span>\n            </div>\n            ${e.paidAmount!==e.total?`\n              <div class="line" style="font-size: 9px; padding-left: 20px;">\n                <span>Montant per√ßu:</span>\n                <span>${e.paidAmount.toFixed(2)} MAD</span>\n              </div>\n            `:""}\n          `).join("")}\n        </div>\n        \n        <div class="double-line"></div>\n        \n        <div class="section">\n          <div class="line">\n            <span>Nombre de commandes:</span>\n            <span><strong>${P.orders}</strong></span>\n          </div>\n          <div class="divider"></div>\n          <div class="line">\n            <span>Ventes brutes:</span>\n            <span>${P.totalSales.toFixed(2)} MAD</span>\n          </div>\n          <div class="line">\n            <span>Remises accord√©es:</span>\n            <span>-${P.totalDiscount.toFixed(2)} MAD</span>\n          </div>\n          <div class="double-line"></div>\n          <div class="line total" style="font-size: 16px;">\n            <span>TOTAL NET:</span>\n            <span>${(P.totalSales-P.totalDiscount).toFixed(2)} MAD</span>\n          </div>\n        </div>\n        \n        <div class="divider"></div>\n        <p class="center" style="font-size: 9px; margin-top: 15px;">*** FIN DU RAPPORT Z ***</p>\n        \n        <script>\n          window.onload = function() { \n            setTimeout(function() {\n              window.print(); \n              setTimeout(function() {\n                window.close();\n              }, 100);\n            }, 250);\n          }\n        <\/script>\n      </body>\n      </html>\n    `;e.document.write(t),e.document.close()},style:{padding:"1rem",background:"#28a745",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"1.1rem",boxShadow:"0 4px 10px rgba(40, 167, 69, 0.3)"},children:"üñ®Ô∏è Imprimer le Rapport Z"}),r.jsx("button",{onClick:async()=>{console.log("üîµ handleClearSystem appel√©");const t=e.filter(e=>"en_attente"===e.status);if(t.length>0)return void alert(`‚ö†Ô∏è VIDAGE IMPOSSIBLE ‚ö†Ô∏è\n\nIl reste ${t.length} commande(s) en attente.\n\nVous devez d'abord cl√¥turer TOUTES les commandes\n(paiement ou annulation) avant de vider le syst√®me.`);const r=window.confirm("‚ö†Ô∏è ATTENTION ‚ö†Ô∏è\n\nCette action va supprimer TOUTES les commandes pay√©es et annul√©es du syst√®me.\n\nCette action est IRR√âVERSIBLE.\n\nVoulez-vous continuer ?");if(console.log("üîµ Premier confirm:",r),!r)return;const i=window.confirm("√ätes-vous VRAIMENT s√ªr de vouloir vider le syst√®me ?\n\nDerni√®re chance pour annuler.");if(console.log("üîµ Double confirm:",i),i)try{console.log("üîµ Appel API clearSystem...");const e=await s.clearSystem();console.log("‚úÖ R√©sultat API:",e),alert(`‚úÖ ${e.message}`),await ie(),await ne(),F(!1)}catch(n){console.error("‚ùå Erreur clearSystem:",n),alert("‚ùå Erreur lors du vidage du syst√®me\n\n"+(n.response?.data?.error||n.message))}},style:{padding:"1rem",background:"#dc3545",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"1.1rem",boxShadow:"0 4px 10px rgba(220, 53, 69, 0.3)"},children:"üóëÔ∏è Vider le Syst√®me"})]})]})}),H&&Y&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1001},children:r.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"10px",width:"90%",maxWidth:"600px",boxShadow:"0 10px 40px rgba(0,0,0,0.3)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[r.jsx("h2",{style:{margin:0,color:"#333"},children:"üé´ Ticket Trouv√©"}),r.jsx("button",{onClick:()=>{Z(!1),V(null)},style:{background:"#dc3545",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"‚úï Fermer"})]}),r.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#666",fontSize:"0.9rem"},children:"Num√©ro de ticket"}),r.jsx("p",{style:{margin:0,fontWeight:"700",fontSize:"1.1rem",color:"#667eea"},children:Y.ticketNumber})]}),r.jsxs("div",{children:[r.jsxs("p",{style:{margin:"0 0 0.5rem 0",color:"#666",fontSize:"0.9rem"},children:["Commande #",Y.id]}),r.jsx("p",{style:{margin:0,fontWeight:"700",fontSize:"1.1rem"},children:Y.clientName||"N/A"})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#666",fontSize:"0.9rem"},children:"Date"}),r.jsx("p",{style:{margin:0,fontWeight:"600"},children:new Date(Y.createdAt).toLocaleString("fr-FR")})]}),r.jsxs("div",{children:[r.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#666",fontSize:"0.9rem"},children:"Statut"}),r.jsx("span",{style:{padding:"0.5rem 1rem",background:"payee"===Y.status?"#28a745":"en_attente"===Y.status?"#ffc107":"#dc3545",color:"white",borderRadius:"20px",fontSize:"0.9rem",fontWeight:"600"},children:Y.status})]})]})]}),r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("h3",{style:{marginTop:0,marginBottom:"1rem"},children:"Articles"}),r.jsx("div",{style:{border:"1px solid #dee2e6",borderRadius:"8px",overflow:"hidden"},children:Y.items?.map((e,t)=>r.jsxs("div",{style:{padding:"1rem",borderBottom:t<Y.items.length-1?"1px solid #dee2e6":"none",display:"flex",justifyContent:"space-between"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:e.productName}),r.jsxs("p",{style:{margin:"0.25rem 0 0 0",color:"#666",fontSize:"0.85rem"},children:["x",e.quantity," √† ",e.price.toFixed(2)," MAD"]})]}),r.jsxs("div",{style:{fontWeight:"700",color:"#28a745"},children:[e.total.toFixed(2)," MAD"]})]},t))})]}),r.jsxs("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsx("span",{children:"Sous-total:"}),r.jsxs("strong",{children:[Y.total.toFixed(2)," MAD"]})]}),Y.discount>0&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem",color:"#dc3545"},children:[r.jsx("span",{children:"Remise:"}),r.jsxs("strong",{children:["-",Y.discount.toFixed(2)," MAD"]})]}),r.jsx("div",{style:{borderTop:"2px solid #dee2e6",paddingTop:"0.5rem",marginTop:"0.5rem"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.2rem"},children:[r.jsx("strong",{children:"TOTAL:"}),r.jsxs("strong",{style:{color:"#28a745"},children:[(Y.total-(Y.discount||0)).toFixed(2)," MAD"]})]})}),Y.paymentMethod&&r.jsx("div",{style:{marginTop:"0.5rem",padding:"0.5rem",background:"white",borderRadius:"5px"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9rem"},children:[r.jsxs("span",{children:["Pay√© (","espece"===Y.paymentMethod?"Esp√®ce":"carte"===Y.paymentMethod?"Carte":"Ch√®que","):"]}),r.jsxs("strong",{children:[(Y.paidAmount||0).toFixed(2)," MAD"]})]})})]}),r.jsx("button",{onClick:()=>{if(!Y)return;const e=Y.total-(Y.discount||0);ce(Y,e,Y.paidAmount||0,Y.paymentMethod||"espece")},style:{width:"100%",padding:"1rem",background:"#667eea",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"1.1rem",boxShadow:"0 4px 10px rgba(102, 126, 234, 0.3)"},children:"üñ®Ô∏è R√©imprimer le Ticket"})]})})]})};function f(){const[i,n]=c.useState([]),[o,d]=c.useState([]),[l,p]=c.useState(null),[m,h]=c.useState([]),[g,u]=c.useState("chambre"),[y,f]=c.useState(""),[b,j]=c.useState(""),[v,w]=c.useState(""),[k,S]=c.useState(!1),[C,A]=c.useState(null),[R,B]=c.useState([]),[z,T]=c.useState(!1),[W,I]=c.useState(null),[D,M]=c.useState(""),[E,N]=c.useState(!1);c.useEffect(()=>{$(),P()},[]),c.useEffect(()=>{l&&F(l)},[l]);const $=async()=>{try{const t=await e.getAll();n(t),t.length>0&&!l&&p(t[0].id)}catch(t){console.error("Erreur chargement cat√©gories:",t)}},F=async e=>{try{const r=(await t.getAll()).filter(t=>t.categoryId===e&&t.available);d(r)}catch(r){console.error("Erreur chargement produits:",r)}},P=async()=>{try{const e=(await s.getAll()).filter(e=>"en_attente"===e.status),t=await Promise.all(e.map(async e=>{try{const t=await s.getById(e.id);return{...e,items:t.items||[],createdByName:e.createdByName||(e.createdByNom&&e.createdByPrenom?`${e.createdByPrenom} ${e.createdByNom}`:void 0)}}catch(t){return console.error("Erreur lors du chargement de la commande:",t),e}}));B(t)}catch(e){console.error("Erreur chargement commandes ouvertes:",e)}},L=(e,t)=>{t<=0?(e=>{h(m.filter(t=>t.productId!==e))})(e):h(m.map(r=>r.productId===e?{...r,quantity:t}:r))},O=()=>m.reduce((e,t)=>e+t.price*t.quantity,0),q=()=>{if(!y)return"";const e=parseInt(y);return"chambre"===g?`Chambre ${e.toString().padStart(2,"0")}`:`Passage ${e}`},U=m.filter(e=>"boissons"===e.categoryType),G=m.filter(e=>"repas"===e.categoryType);return r.jsx("div",{children:E?r.jsxs("div",{children:[r.jsx("button",{onClick:()=>N(!1),style:{marginBottom:"1rem",padding:"0.75rem 1.5rem",background:"#666",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:"‚Üê Retour aux commandes"}),r.jsx(x,{})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{marginBottom:"0.5rem",display:"flex",gap:"0.5rem"},children:[r.jsxs("button",{onClick:()=>{P(),T(!0)},style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600",fontSize:"0.9rem"},children:["üìã Commandes en cours (",R.length,")"]}),r.jsx("button",{onClick:()=>N(!0),style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600",fontSize:"0.9rem"},children:"üñ®Ô∏è Imprimantes"}),W&&m.length>0&&r.jsxs("button",{onClick:()=>(async e=>{if(0!==m.length)try{const t=m.map(e=>({productId:e.productId,productName:e.productName,quantity:e.quantity,price:e.price,total:e.price*e.quantity}));await s.addItems(e.id,t);try{const t=await a.printOrder(e.id),r=t.results.printed.length>0?"üìÑ Impression:\n"+t.results.printed.map(e=>`  ‚Ä¢ ${e.destination}: ${e.items} article(s) ‚Üí ${e.printer}`).join("\n"):"‚ö†Ô∏è Aucune imprimante configur√©e";alert(`‚úÖ Articles ajout√©s √† ${e.clientName}\n\n`+r)}catch{alert(`‚úÖ Articles ajout√©s √† ${e.clientName}\n‚ö†Ô∏è Erreur d'impression`)}h([]),T(!1),P()}catch(t){alert(t.response?.data?.error||"Erreur")}else alert("Veuillez d'abord ajouter des articles au panier")})(W),style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, #4caf50 0%, #45a049 100%)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600",fontSize:"0.9rem",animation:"pulse 1.5s infinite"},children:["‚úÖ Ajouter √†: ",W.clientName]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"1rem",height:"calc(100vh - 180px)"},children:[r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[r.jsx("div",{style:{display:"flex",gap:"0.3rem",flexWrap:"wrap"},children:i.map(e=>r.jsxs("button",{onClick:()=>p(e.id),style:{padding:"0.5rem 1rem",background:l===e.id?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"#f0f0f0",color:l===e.id?"white":"#333",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600",fontSize:"0.9rem"},children:["boissons"===e.type?"üçπ":"üçΩÔ∏è"," ",e.name]},e.id))}),r.jsx("input",{type:"text",placeholder:"üîç Rechercher un produit...",value:D,onChange:e=>M(e.target.value),style:{padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"0.9rem",outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.currentTarget.style.borderColor="#667eea",onBlur:e=>e.currentTarget.style.borderColor="#e0e0e0"}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"0.5rem",overflowY:"auto",flex:1},children:o.filter(e=>e.name.toLowerCase().includes(D.toLowerCase())).map(e=>r.jsxs("div",{onClick:()=>(e=>{const t=i.find(t=>t.id===e.categoryId),r=m.find(t=>t.productId===e.id);h(r?m.map(t=>t.productId===e.id?{...t,quantity:t.quantity+1}:t):[...m,{productId:e.id,productName:e.name,price:e.price,quantity:1,categoryType:t?.type}])})(e),style:{padding:"0.5rem",background:"white",border:"2px solid #e0e0e0",borderRadius:"8px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",transition:"all 0.2s",height:"150px",justifyContent:"space-between"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.03)",e.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.12)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="none"},children:[e.image?r.jsx("img",{src:e.image,alt:e.name,style:{width:"70px",height:"70px",objectFit:"cover",borderRadius:"6px"}}):r.jsx("div",{style:{fontSize:"2.5rem"},children:"boissons"===i.find(t=>t.id===e.categoryId)?.type?"ü•§":"üçΩÔ∏è"}),r.jsx("div",{style:{fontWeight:"600",fontSize:"0.8rem",lineHeight:"1.2"},children:e.name}),r.jsxs("div",{style:{color:"#667eea",fontWeight:"bold",fontSize:"1rem"},children:[e.price.toFixed(2)," MAD"]})]},e.id))})]}),r.jsxs("div",{style:{background:"white",padding:"1.5rem",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column"},children:[r.jsx("h2",{style:{margin:"0 0 1rem 0"},children:"üõí Commande"}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:[r.jsx("button",{onClick:()=>u("chambre"),style:{flex:1,padding:"0.75rem",background:"chambre"===g?"#667eea":"#f0f0f0",color:"chambre"===g?"white":"#333",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:"üè® Chambre"}),r.jsx("button",{onClick:()=>u("passage"),style:{flex:1,padding:"0.75rem",background:"passage"===g?"#667eea":"#f0f0f0",color:"passage"===g?"white":"#333",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:"üö∂ Passage"})]}),r.jsxs("select",{value:y,onChange:e=>f(e.target.value),style:{width:"100%",padding:"0.75rem",border:"2px solid #ddd",borderRadius:"8px",fontSize:"1rem",marginBottom:"0.5rem"},children:[r.jsx("option",{value:"",children:"chambre"===g?"S√©lectionner chambre (01-24)":"S√©lectionner passage (1-50)"}),"chambre"===g?Array.from({length:24},(e,t)=>t+1).map(e=>r.jsxs("option",{value:e,children:["Chambre ",e.toString().padStart(2,"0")]},e)):Array.from({length:50},(e,t)=>t+1).map(e=>r.jsxs("option",{value:e,children:["Passage ",e]},e))]}),r.jsx("input",{type:"time",value:b,onChange:e=>j(e.target.value),style:{width:"100%",padding:"0.75rem",border:b?"2px solid #4CAF50":"2px solid #ff6b6b",borderRadius:"8px",fontSize:"1rem",marginBottom:"0.5rem",fontWeight:"bold",backgroundColor:b?"#fff":"#ffe6e6"}}),r.jsx("textarea",{value:v,onChange:e=>w(e.target.value),placeholder:"Notes",rows:2,style:{width:"100%",padding:"0.75rem",border:"2px solid #ddd",borderRadius:"8px",resize:"none",fontSize:"0.9rem"}})]}),r.jsxs("div",{style:{flex:1,overflowY:"auto",marginBottom:"1rem"},children:[U.length>0&&r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsxs("div",{style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",padding:"0.5rem",borderRadius:"6px",fontWeight:"600",fontSize:"0.9rem",marginBottom:"0.5rem"},children:["üçπ BAR (",U.length,")"]}),U.map(e=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"#f9f9f9",borderRadius:"6px",marginBottom:"0.5rem"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontWeight:"600",fontSize:"0.9rem"},children:e.productName}),r.jsxs("div",{style:{color:"#666",fontSize:"0.85rem"},children:[e.price.toFixed(2)," MAD"]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>L(e.productId,e.quantity-1),style:{width:"28px",height:"28px",background:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"-"}),r.jsx("span",{style:{fontWeight:"bold",minWidth:"30px",textAlign:"center"},children:e.quantity}),r.jsx("button",{onClick:()=>L(e.productId,e.quantity+1),style:{width:"28px",height:"28px",background:"#4caf50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"+"})]})]},e.productId))]}),G.length>0&&r.jsxs("div",{children:[r.jsxs("div",{style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",color:"white",padding:"0.5rem",borderRadius:"6px",fontWeight:"600",fontSize:"0.9rem",marginBottom:"0.5rem"},children:["üç≥ CUISINE (",G.length,")"]}),G.map(e=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"#f9f9f9",borderRadius:"6px",marginBottom:"0.5rem"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontWeight:"600",fontSize:"0.9rem"},children:e.productName}),r.jsxs("div",{style:{color:"#666",fontSize:"0.85rem"},children:[e.price.toFixed(2)," MAD"]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>L(e.productId,e.quantity-1),style:{width:"28px",height:"28px",background:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"-"}),r.jsx("span",{style:{fontWeight:"bold",minWidth:"30px",textAlign:"center"},children:e.quantity}),r.jsx("button",{onClick:()=>L(e.productId,e.quantity+1),style:{width:"28px",height:"28px",background:"#4caf50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"+"})]})]},e.productId))]}),0===m.length&&r.jsx("div",{style:{textAlign:"center",color:"#999",padding:"2rem 0"},children:"Panier vide"})]}),r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"1rem",background:"#f5f5f5",borderRadius:"8px",marginBottom:"1rem",fontSize:"1.3rem",fontWeight:"bold"},children:[r.jsx("span",{children:"TOTAL:"}),r.jsxs("span",{style:{color:"#667eea"},children:[O().toFixed(2)," MAD"]})]}),r.jsx("button",{onClick:async()=>{if(0!==m.length){if((()=>{const e=parseInt(y);return!y||isNaN(e)?(alert("Veuillez s√©lectionner un num√©ro"),!1):"chambre"===g&&(e<1||e>24)?(alert("Num√©ro de chambre invalide (1-24)"),!1):"passage"!==g||!(e<1||e>50)||(alert("Num√©ro de passage invalide (1-50)"),!1)})())if(b)try{const t={clientName:q(),mealTime:b,notes:v.trim(),items:m.map(e=>({productId:e.productId,productName:e.productName,quantity:e.quantity,price:e.price,total:e.price*e.quantity,categoryType:e.categoryType})),total:O()},r=await s.create(t);try{await a.printOrder(r.orderId);const e=await a.getTicketsByDestination(r.orderId),t={order:r,tickets:{bar:{items:[]},cuisine:{items:[]}}};for(const r of e)"BAR"===r.destination?t.tickets.bar=r:"CUISINE"===r.destination&&(t.tickets.cuisine=r);A(t),S(!0),alert(`‚úÖ Commande cr√©√©e avec succ√®s!\n\nTicket N¬∞: ${r.ticketNumber}\n\nüìÑ Envoy√©e aux √©crans d'affichage`)}catch(e){console.error("Erreur impression:",e),alert(`‚úÖ Commande cr√©√©e (Ticket ${r.ticketNumber})\n‚ö†Ô∏è Erreur d'affichage`)}h([]),f(""),j(""),w(""),I(null),P()}catch(t){alert(t.response?.data?.error||"Erreur lors de la cr√©ation de la commande")}else alert("Veuillez s√©lectionner l'heure du service")}else alert("Panier vide")},disabled:0===m.length||!y||!b,style:{width:"100%",padding:"1rem",background:0!==m.length&&y&&b?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"#ccc",color:"white",border:"none",borderRadius:"8px",cursor:0!==m.length&&y&&b?"pointer":"not-allowed",fontSize:"1.1rem",fontWeight:"600"},children:"üì§ Envoyer la commande"})]})]})]}),z&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"2rem",width:"90%",maxWidth:"900px",maxHeight:"90vh",overflow:"auto"},children:[r.jsxs("h2",{children:["üìã Commandes en cours (",R.length,")"]}),0===R.length?r.jsx("p",{style:{textAlign:"center",color:"#999",padding:"2rem"},children:"Aucune commande en cours"}):r.jsx("div",{style:{display:"grid",gap:"1rem"},children:R.map(e=>r.jsxs("div",{style:{padding:"1.5rem",border:"2px solid #e0e0e0",borderRadius:"8px",background:"#f9f9f9"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:"600",fontSize:"1.1rem"},children:e.clientName}),r.jsxs("div",{style:{color:"#666",fontSize:"0.9rem"},children:["Ticket: ",e.ticketNumber]}),e.createdByName&&r.jsxs("div",{style:{color:"#4caf50",fontSize:"0.85rem",marginTop:"0.25rem"},children:["üë§ Cr√©√©e par: ",e.createdByName]})]}),r.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.3rem",color:"#667eea"},children:[e.total?.toFixed(2)," MAD"]})]}),e.items&&e.items.length>0&&r.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:"white",borderRadius:"6px",maxHeight:"200px",overflowY:"auto"},children:[r.jsxs("div",{style:{fontWeight:"600",fontSize:"0.9rem",marginBottom:"0.5rem",color:"#333"},children:["üìù Articles (",e.items.length,")"]}),e.items.map((t,i)=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.4rem 0",borderBottom:i<e.items.length-1?"1px solid #f0f0f0":"none",fontSize:"0.85rem",color:"#333"},children:[r.jsxs("div",{children:[r.jsxs("span",{style:{fontWeight:"600",color:"#333"},children:[t.quantity,"x "]}),r.jsx("span",{style:{color:"#333"},children:t.productName||"Produit inconnu"}),t.addedByName&&r.jsxs("span",{style:{color:"#999",fontSize:"0.75rem",marginLeft:"0.5rem"},children:["(par ",t.addedByName,")"]})]}),r.jsxs("span",{style:{color:"#667eea",fontWeight:"600"},children:[t.total.toFixed(2)," MAD"]})]},i))]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>{T(!1),window.scrollTo({top:0,behavior:"smooth"}),I(e),alert(`üõí Ajoutez des produits au panier\npuis cliquez √† nouveau sur "Commandes en cours"\npour les ajouter √†: ${e.clientName}`)},style:{flex:1,padding:"0.75rem",background:"#4caf50",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600"},children:"‚ûï Ajouter des articles"}),r.jsx("button",{onClick:()=>(async e=>{try{await a.printOrder(e),alert("‚úÖ Bon r√©imprim√©")}catch(t){alert("‚ùå Erreur de r√©impression")}})(e.id),style:{flex:1,padding:"0.75rem",background:"#667eea",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600"},children:"üñ®Ô∏è R√©imprimer"})]})]},e.id))}),r.jsx("button",{onClick:()=>T(!1),style:{marginTop:"1.5rem",width:"100%",padding:"1rem",background:"#667eea",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:"‚úì Fermer"})]})}),k&&C&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"2rem",width:"90%",maxWidth:"900px",maxHeight:"90vh",overflow:"auto"},children:[r.jsx("h2",{children:"üìÑ Aper√ßu des tickets"}),r.jsxs("p",{style:{color:"#666",marginBottom:"1.5rem"},children:["Ticket: ",r.jsx("strong",{children:C?.order?.ticketNumber})," | Client: ",r.jsx("strong",{children:C?.order?.clientName||"Sans nom"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[C?.tickets?.bar?.items&&C.tickets.bar.items.length>0&&r.jsxs("div",{style:{border:"2px solid #f5576c",borderRadius:"8px",padding:"1rem"},children:[r.jsx("h3",{style:{color:"#f5576c",marginTop:0},children:"üçπ BAR"}),C.tickets.bar.items.map((e,t)=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsxs("span",{children:[e.quantity,"x ",e.productName]}),r.jsxs("span",{children:[e.total.toFixed(2)," MAD"]})]},t))]}),C?.tickets?.cuisine?.items&&C.tickets.cuisine.items.length>0&&r.jsxs("div",{style:{border:"2px solid #00f2fe",borderRadius:"8px",padding:"1rem"},children:[r.jsx("h3",{style:{color:"#00f2fe",marginTop:0},children:"üç≥ CUISINE"}),C.tickets.cuisine.items.map((e,t)=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsxs("span",{children:[e.quantity,"x ",e.productName]}),r.jsxs("span",{children:[e.total.toFixed(2)," MAD"]})]},t))]})]}),r.jsx("button",{onClick:()=>S(!1),style:{marginTop:"1.5rem",width:"100%",padding:"1rem",background:"#667eea",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:"‚úì Fermer"})]})})]})})}function b(){const[e,t]=c.useState([]),[i,n]=c.useState(null),[o,s]=c.useState(!0),a=async()=>{try{const e=await d.get("/orders/reception");t(e.data),s(!1)}catch(e){console.error("Erreur chargement r√©ception:",e),s(!1)}},l=async e=>{const t=window.open("","","width=400,height=700");if(!t)return;const r=`\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Facture Chambre ${e.roomNumber}</title>\n        <style>\n          @page { margin: 0; }\n          body { \n            font-family: 'Courier New', monospace; \n            padding: 15px;\n            margin: 0;\n            font-size: 11px;\n            max-width: 350px;\n            color: #000;\n          }\n          h2, h3 { text-align: center; margin: 10px 0; }\n          h2 { font-size: 18px; }\n          h3 { font-size: 14px; border-bottom: 2px solid #000; padding-bottom: 5px; }\n          .divider { border-top: 1px dashed #000; margin: 10px 0; }\n          .double-line { border-top: 2px solid #000; margin: 10px 0; }\n          .line { display: flex; justify-content: space-between; margin: 3px 0; }\n          .total { font-weight: bold; font-size: 13px; margin-top: 5px; }\n          .center { text-align: center; }\n          .item-line { margin: 2px 0; font-size: 10px; }\n        </style>\n      </head>\n      <body>\n        <h2>YOU VOYAGE COMPANY</h2>\n        <p class="center" style="font-size: 10px;">Tel: 06 16 73 41 71</p>\n        <div class="double-line"></div>\n        <h3>FACTURE CHAMBRE ${e.roomNumber}</h3>\n        <p class="center"><strong>Date: ${(new Date).toLocaleDateString("fr-FR")}</strong></p>\n        <p class="center" style="font-size: 9px;">Imprim√© le: ${(new Date).toLocaleString("fr-FR")}</p>\n        <div class="divider"></div>\n        \n        ${e.orders.map((t,r)=>`\n          <div style="margin-bottom: 15px;">\n            <p style="font-weight: bold; margin: 5px 0;">Ticket #${t.ticketNumber||t.id}</p>\n            <p style="font-size: 9px; color: #666; margin: 2px 0;">${new Date(t.createdAt).toLocaleString("fr-FR")}</p>\n            <div class="divider"></div>\n            ${t.items.map(e=>`\n              <div class="item-line">\n                <div class="line">\n                  <span>${e.productName}</span>\n                  <span>x${e.quantity}</span>\n                </div>\n                <div class="line" style="padding-left: 20px;">\n                  <span>${e.price.toFixed(2)} MAD/u</span>\n                  <span><strong>${e.total.toFixed(2)} MAD</strong></span>\n                </div>\n              </div>\n            `).join("")}\n            <div class="divider"></div>\n            <div class="line">\n              <span>Sous-total:</span>\n              <span>${t.total.toFixed(2)} MAD</span>\n            </div>\n            ${t.discount>0?`\n              <div class="line">\n                <span>Remise:</span>\n                <span>-${t.discount.toFixed(2)} MAD</span>\n              </div>\n            `:""}\n            <div class="line total">\n              <span>Total:</span>\n              <span>${t.finalTotal.toFixed(2)} MAD</span>\n            </div>\n            ${t.paymentMethod?`\n              <div class="line" style="font-size: 9px;">\n                <span>Pay√© par:</span>\n                <span>${"espece"===t.paymentMethod?"Esp√®ce":"carte"===t.paymentMethod?"Carte":"Ch√®que"}</span>\n              </div>\n            `:""}\n          </div>\n          ${r<e.orders.length-1?'<div class="double-line"></div>':""}\n        `).join("")}\n        \n        <div class="double-line"></div>\n        <div class="line total" style="font-size: 16px;">\n          <span>TOTAL CHAMBRE:</span>\n          <span>${e.totalAmount.toFixed(2)} MAD</span>\n        </div>\n        \n        <div class="divider"></div>\n        <p class="center" style="font-size: 9px; margin-top: 15px;">*** MERCI DE VOTRE VISITE ***</p>\n        \n        <script>\n          window.onload = function() { \n            setTimeout(function() {\n              window.print(); \n              setTimeout(function() {\n                window.close();\n              }, 100);\n            }, 250);\n          }\n        <\/script>\n      </body>\n      </html>\n    `;t.document.write(r),t.document.close()},p=async e=>{try{await d.post(`/orders/reception/${e}/print`),await a()}catch(t){console.error("Erreur marquage impression:",t)}};return c.useEffect(()=>{a();const e=setInterval(a,1e4);return()=>clearInterval(e)},[]),o?r.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:r.jsx("p",{style:{fontSize:"1.2rem",color:"#666"},children:"Chargement..."})}):r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[r.jsx("h2",{style:{fontSize:"1.8rem",color:"#333",margin:0},children:"üè® R√©ception - Chambres"}),r.jsx("button",{onClick:a,style:{padding:"0.75rem 1.5rem",background:"#667eea",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"üîÑ Actualiser"})]}),0===e.length?r.jsx("div",{style:{padding:"3rem",textAlign:"center",background:"#f8f9fa",borderRadius:"10px",border:"2px dashed #dee2e6"},children:r.jsx("p",{style:{fontSize:"1.2rem",color:"#666",margin:0},children:"Aucune consommation en attente"})}):r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1.5rem"},children:e.map(e=>r.jsxs("div",{onClick:()=>n(e),style:{background:"white",border:"3px solid #667eea",borderRadius:"12px",padding:"1.5rem",cursor:"pointer",transition:"all 0.3s",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.15)",position:"relative"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-5px)",e.currentTarget.style.boxShadow="0 8px 20px rgba(102, 126, 234, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 12px rgba(102, 126, 234, 0.15)"},children:[r.jsx("div",{style:{position:"absolute",top:"10px",right:"10px",background:e.orders.some(e=>!e.receptionPrintedAt)?"#ff6b6b":"#51cf66",color:"white",padding:"0.25rem 0.5rem",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"700"},children:e.orders.some(e=>!e.receptionPrintedAt)?"NOUVEAU":"IMPRIM√â"}),r.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem"},children:[r.jsx("div",{style:{width:"80px",height:"80px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 0.5rem",fontSize:"2rem"},children:"üö™"}),r.jsxs("h3",{style:{margin:0,fontSize:"1.5rem",color:"#333"},children:["Chambre ",e.roomNumber]})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem",background:"#f8f9fa",borderRadius:"5px",marginBottom:"0.5rem"},children:[r.jsx("span",{style:{color:"#666",fontSize:"0.9rem"},children:"Tickets:"}),r.jsx("span",{style:{fontWeight:"700",color:"#333"},children:e.orders.length})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"5px",color:"white"},children:[r.jsx("span",{style:{fontWeight:"600"},children:"Total:"}),r.jsxs("span",{style:{fontSize:"1.3rem",fontWeight:"700"},children:[e.totalAmount.toFixed(2)," MAD"]})]})]}),r.jsx("button",{onClick:t=>{t.stopPropagation(),l(e),p(e.roomNumber)},style:{width:"100%",padding:"0.75rem",background:"#28a745",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600",fontSize:"1rem"},children:"üñ®Ô∏è Imprimer Facture"})]},e.roomNumber))}),i&&r.jsx("div",{onClick:()=>n(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{onClick:e=>e.stopPropagation(),style:{background:"white",padding:"2rem",borderRadius:"15px",maxWidth:"800px",width:"90%",maxHeight:"90vh",overflowY:"auto"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[r.jsxs("h2",{style:{margin:0,color:"#333"},children:["üö™ Chambre ",i.roomNumber]}),r.jsx("button",{onClick:()=>n(null),style:{background:"#dc3545",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"5px",cursor:"pointer",fontWeight:"600"},children:"‚úï Fermer"})]}),r.jsx("div",{style:{marginBottom:"1.5rem"},children:i.orders.map(e=>r.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"10px",marginBottom:"1rem",border:"2px solid #dee2e6"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsxs("h4",{style:{margin:"0 0 0.5rem 0",color:"#333"},children:["Ticket #",e.ticketNumber||e.id]}),r.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"#666"},children:new Date(e.createdAt).toLocaleString("fr-FR")})]}),r.jsx("div",{style:{padding:"0.25rem 0.75rem",background:"payee"===e.status?"#28a745":"#ffc107",color:"white",borderRadius:"20px",fontSize:"0.85rem",fontWeight:"700",height:"fit-content"},children:"payee"===e.status?"PAY√âE":"EN ATTENTE"})]}),r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"1rem"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{background:"#dee2e6"},children:[r.jsx("th",{style:{padding:"0.5rem",textAlign:"left",color:"#333"},children:"Article"}),r.jsx("th",{style:{padding:"0.5rem",textAlign:"center",color:"#333"},children:"Qt√©"}),r.jsx("th",{style:{padding:"0.5rem",textAlign:"right",color:"#333"},children:"Prix U."}),r.jsx("th",{style:{padding:"0.5rem",textAlign:"right",color:"#333"},children:"Total"})]})}),r.jsx("tbody",{children:e.items.map((e,t)=>r.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[r.jsx("td",{style:{padding:"0.5rem",color:"#333"},children:e.productName}),r.jsx("td",{style:{padding:"0.5rem",textAlign:"center",color:"#333"},children:e.quantity}),r.jsxs("td",{style:{padding:"0.5rem",textAlign:"right",color:"#333"},children:[e.price.toFixed(2)," MAD"]}),r.jsxs("td",{style:{padding:"0.5rem",textAlign:"right",fontWeight:"600",color:"#333"},children:[e.total.toFixed(2)," MAD"]})]},t))})]}),r.jsxs("div",{style:{textAlign:"right"},children:[r.jsxs("div",{style:{marginBottom:"0.25rem",color:"#333"},children:["Sous-total: ",r.jsxs("strong",{children:[e.total.toFixed(2)," MAD"]})]}),e.discount>0&&r.jsxs("div",{style:{marginBottom:"0.25rem",color:"#dc3545"},children:["Remise: ",r.jsxs("strong",{children:["-",e.discount.toFixed(2)," MAD"]})]}),r.jsxs("div",{style:{fontSize:"1.2rem",color:"#333"},children:["Total: ",r.jsxs("strong",{children:[e.finalTotal.toFixed(2)," MAD"]})]})]})]},e.id))}),r.jsx("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"10px",color:"white",marginBottom:"1rem"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.5rem"},children:[r.jsx("span",{style:{fontWeight:"600"},children:"TOTAL CHAMBRE:"}),r.jsxs("strong",{children:[i.totalAmount.toFixed(2)," MAD"]})]})}),r.jsx("button",{onClick:()=>{l(i),p(i.roomNumber),n(null)},style:{width:"100%",padding:"1rem",background:"#28a745",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontWeight:"600",fontSize:"1.1rem"},children:"üñ®Ô∏è Imprimer Facture Compl√®te"})]})})]})}const j=({size:e=120,variant:t="full"})=>"icon"===t?r.jsxs("svg",{width:e,height:e,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"gradient1",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#667eea"}),r.jsx("stop",{offset:"50%",stopColor:"#764ba2"}),r.jsx("stop",{offset:"100%",stopColor:"#f093fb"})]}),r.jsxs("linearGradient",{id:"accentGrad",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[r.jsx("stop",{offset:"0%",stopColor:"#4ade80"}),r.jsx("stop",{offset:"100%",stopColor:"#22d3ee"})]}),r.jsxs("linearGradient",{id:"goldGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#fbbf24"}),r.jsx("stop",{offset:"100%",stopColor:"#f59e0b"})]}),r.jsxs("filter",{id:"glow",children:[r.jsx("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),r.jsxs("feMerge",{children:[r.jsx("feMergeNode",{in:"coloredBlur"}),r.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),r.jsx("filter",{id:"iconShadow",children:r.jsx("feDropShadow",{dx:"0",dy:"2",stdDeviation:"2",floodOpacity:"0.3"})})]}),r.jsx("circle",{cx:"50",cy:"50",r:"47",fill:"url(#gradient1)",filter:"url(#iconShadow)"}),r.jsx("circle",{cx:"50",cy:"50",r:"44",fill:"none",stroke:"white",strokeWidth:"1.5",opacity:"0.25"}),r.jsx("rect",{x:"28",y:"35",width:"44",height:"32",rx:"4",fill:"white",opacity:"0.97",filter:"url(#iconShadow)"}),r.jsx("rect",{x:"31",y:"39",width:"38",height:"12",rx:"2",fill:"url(#accentGrad)",filter:"url(#glow)"}),r.jsx("text",{x:"50",y:"48",fontSize:"8",fill:"white",textAnchor:"middle",fontFamily:"Arial, sans-serif",fontWeight:"bold",letterSpacing:"1.5",children:"YOU"}),r.jsxs("g",{opacity:"0.85",children:[r.jsx("rect",{x:"32",y:"54",width:"7",height:"5",rx:"1",fill:"#667eea"}),r.jsx("rect",{x:"40.5",y:"54",width:"7",height:"5",rx:"1",fill:"#764ba2"}),r.jsx("rect",{x:"49",y:"54",width:"7",height:"5",rx:"1",fill:"#f093fb"}),r.jsx("rect",{x:"57.5",y:"54",width:"10",height:"5",rx:"1",fill:"url(#goldGrad)"}),r.jsx("rect",{x:"32",y:"61",width:"7",height:"5",rx:"1",fill:"#667eea"}),r.jsx("rect",{x:"40.5",y:"61",width:"7",height:"5",rx:"1",fill:"#764ba2"}),r.jsx("rect",{x:"49",y:"61",width:"7",height:"5",rx:"1",fill:"#f093fb"}),r.jsx("rect",{x:"57.5",y:"61",width:"10",height:"5",rx:"1",fill:"url(#goldGrad)"})]}),r.jsx("circle",{cx:"67",cy:"38",r:"1.8",fill:"#4ade80",opacity:"0.95",filter:"url(#glow)"}),r.jsxs("g",{transform:"translate(77, 23)",children:[r.jsx("circle",{cx:"0",cy:"0",r:"10",fill:"url(#goldGrad)",filter:"url(#iconShadow)"}),r.jsx("circle",{cx:"0",cy:"0",r:"8",fill:"none",stroke:"white",strokeWidth:"1",opacity:"0.4"}),r.jsx("path",{d:"M0,-5.5 L1.5,-2 L5,-1.5 L2.5,1 L3,5 L0,3 L-3,5 L-2.5,1 L-5,-1.5 L-1.5,-2 Z",fill:"white",filter:"url(#glow)"})]})]}):r.jsxs("svg",{width:2.5*e,height:e,viewBox:"0 0 300 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"logoGradient1",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#667eea"}),r.jsx("stop",{offset:"50%",stopColor:"#764ba2"}),r.jsx("stop",{offset:"100%",stopColor:"#f093fb"})]}),r.jsxs("linearGradient",{id:"logoGradient2",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#4ade80"}),r.jsx("stop",{offset:"100%",stopColor:"#22d3ee"})]}),r.jsxs("linearGradient",{id:"goldBadge",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#fbbf24"}),r.jsx("stop",{offset:"100%",stopColor:"#f59e0b"})]}),r.jsx("filter",{id:"fullShadow",children:r.jsx("feDropShadow",{dx:"0",dy:"3",stdDeviation:"4",floodOpacity:"0.35"})}),r.jsxs("filter",{id:"textGlow",children:[r.jsx("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),r.jsxs("feMerge",{children:[r.jsx("feMergeNode",{in:"coloredBlur"}),r.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),r.jsx("circle",{cx:"50",cy:"50",r:"46",fill:"url(#logoGradient1)",filter:"url(#fullShadow)"}),r.jsx("circle",{cx:"50",cy:"50",r:"43",fill:"none",stroke:"white",strokeWidth:"1.5",opacity:"0.25"}),r.jsx("rect",{x:"28",y:"37",width:"44",height:"30",rx:"4",fill:"white",opacity:"0.97"}),r.jsx("rect",{x:"31",y:"40",width:"38",height:"11",rx:"2",fill:"url(#logoGradient2)",filter:"url(#textGlow)"}),r.jsx("text",{x:"50",y:"48.5",fontSize:"7.5",fill:"white",textAnchor:"middle",fontFamily:"Arial, sans-serif",fontWeight:"bold",letterSpacing:"1.5",children:"YOU"}),r.jsxs("g",{opacity:"0.85",children:[r.jsx("rect",{x:"32",y:"54",width:"7",height:"4.5",rx:"1",fill:"#667eea"}),r.jsx("rect",{x:"40.5",y:"54",width:"7",height:"4.5",rx:"1",fill:"#764ba2"}),r.jsx("rect",{x:"49",y:"54",width:"7",height:"4.5",rx:"1",fill:"#f093fb"}),r.jsx("rect",{x:"57.5",y:"54",width:"10",height:"4.5",rx:"1",fill:"url(#goldBadge)"}),r.jsx("rect",{x:"32",y:"60",width:"7",height:"4.5",rx:"1",fill:"#667eea"}),r.jsx("rect",{x:"40.5",y:"60",width:"7",height:"4.5",rx:"1",fill:"#764ba2"}),r.jsx("rect",{x:"49",y:"60",width:"7",height:"4.5",rx:"1",fill:"#f093fb"}),r.jsx("rect",{x:"57.5",y:"60",width:"10",height:"4.5",rx:"1",fill:"url(#goldBadge)"})]}),r.jsx("circle",{cx:"67",cy:"39.5",r:"1.7",fill:"#4ade80",opacity:"0.95",filter:"url(#textGlow)"}),r.jsxs("g",{transform:"translate(76, 24)",children:[r.jsx("circle",{cx:"0",cy:"0",r:"9",fill:"url(#goldBadge)",filter:"url(#fullShadow)"}),r.jsx("circle",{cx:"0",cy:"0",r:"7",fill:"none",stroke:"white",strokeWidth:"0.8",opacity:"0.4"}),r.jsx("path",{d:"M0,-5 L1.3,-1.8 L4.5,-1.3 L2.2,1 L2.7,4.5 L0,2.7 L-2.7,4.5 L-2.2,1 L-4.5,-1.3 L-1.3,-1.8 Z",fill:"white",filter:"url(#textGlow)"})]}),r.jsx("text",{x:"110",y:"48",fontSize:"38",fontWeight:"900",fill:"url(#logoGradient1)",fontFamily:"Arial, sans-serif",letterSpacing:"1",filter:"url(#textGlow)",children:"YOU"}),r.jsx("text",{x:"110",y:"76",fontSize:"26",fontWeight:"700",fill:"#2d3748",fontFamily:"Arial, sans-serif",letterSpacing:"0.5",children:"CAISSE"}),r.jsx("rect",{x:"215",y:"52",width:"72",height:"26",rx:"13",fill:"url(#goldBadge)",filter:"url(#fullShadow)"}),r.jsx("rect",{x:"217",y:"54",width:"68",height:"22",rx:"11",fill:"none",stroke:"white",strokeWidth:"1",opacity:"0.35"}),r.jsx("text",{x:"251",y:"69.5",fontSize:"13",fontWeight:"800",fill:"white",textAnchor:"middle",fontFamily:"Arial, sans-serif",letterSpacing:"1.2",children:"PREMIUM"})]}),v=()=>{const{user:e,logout:t,isAdmin:i,isCaissier:n,isServeur:o}=l(),s=p(),d="RECEPTION"===e?.role;return r.jsxs("div",{style:{minHeight:"100vh",background:"#f5f5f5"},children:[r.jsx("header",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)",color:"white",padding:"1rem 2rem",boxShadow:"0 4px 20px rgba(0,0,0,0.15)"},children:r.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx(j,{size:55,variant:"icon"}),r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"1.6rem",fontWeight:"700",margin:0,letterSpacing:"0.5px"},children:"YOU CAISSE PRO"}),r.jsx("p",{style:{fontSize:"0.75rem",margin:0,opacity:.85,fontWeight:"500"},children:"YOU VOYAGE COMPANY"})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2rem"},children:[r.jsxs("div",{style:{textAlign:"right",borderRight:"1px solid rgba(255,255,255,0.3)",paddingRight:"1.5rem"},children:[r.jsx("div",{style:{fontSize:"0.85rem",opacity:.9,fontWeight:"600"},children:"üìû Contact"}),r.jsx("div",{style:{fontSize:"1rem",fontWeight:"700",letterSpacing:"0.5px"},children:"06 16 73 41 71"})]}),r.jsxs("div",{style:{textAlign:"right"},children:[r.jsxs("span",{style:{fontSize:"0.95rem",opacity:.95,fontWeight:"600"},children:[e?.prenom," ",e?.nom]}),r.jsx("span",{style:{display:"block",fontSize:"0.75rem",opacity:.75,textTransform:"uppercase",letterSpacing:"0.5px"},children:e?.role})]}),r.jsx("button",{onClick:()=>{t(),s("/login")},style:{padding:"0.6rem 1.2rem",background:"rgba(255,255,255,0.25)",border:"1px solid rgba(255,255,255,0.6)",color:"white",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"0.9rem",transition:"all 0.3s",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},onMouseOver:e=>e.currentTarget.style.background="rgba(255,255,255,0.35)",onMouseOut:e=>e.currentTarget.style.background="rgba(255,255,255,0.25)",children:"D√©connexion"})]})]})}),r.jsxs("main",{style:{maxWidth:"1200px",margin:"0 auto",padding:"2rem"},children:[i&&r.jsx(g,{}),n&&r.jsx(y,{}),o&&r.jsx(f,{}),d&&r.jsx(b,{})]})]})};export{v as default};
